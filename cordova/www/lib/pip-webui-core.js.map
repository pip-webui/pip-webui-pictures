{"version":3,"sources":["core.js","behaviors/clear_errors.js","behaviors/draggable.js","behaviors/fab_tooltip_visibility.js","behaviors/focused.js","behaviors/infinite_scroll.js","behaviors/selected.js","behaviors/unsaved_changes.js","formatting/date_format.js","services/assert.js","services/debug.js","services/errors.js","services/state.js","services/theme.js","services/timer.js","services/transactions.js","services/translate.js","filters/datetime.js","filters/translate.js","utilities/collections.js","utilities/dates.js","utilities/form_errors.js","utilities/general.js","utilities/strings.js","utilities/tags.js","utilities/utilities.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-core.js","sourcesContent":["/**\r\n * @file Registration of all WebUI core services\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCore', [\r\n        'pipUtils',\r\n        'pipErrors',\r\n\t    'pipTransactions',\r\n\t    'pipTranslate',\r\n        'pipState',\r\n        'pipTimer',\r\n        'pipAssert',\r\n        'pipDebug',\r\n        'pipDateFormat',\r\n        'pipDateTimeFilters',\r\n        'pipTranslateFilters',\r\n        'pipClearErrors',\r\n        'pipTheme',\r\n\r\n        'pipFocused',\r\n        'pipSelected',\r\n        'pipInfiniteScroll',\r\n        'pipDraggable',\r\n        'pipUnsavedChanges',\r\n        'pipFabTooltipVisibility',\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Special error handling for forms\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipClearErrors', []);\r\n\r\n    thisModule.directive('pipClearErrors', function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngModel', '^?form'],\r\n            link: function ($scope, $element, $attrs, $ctrls) {\r\n                var \r\n                    fieldController = $ctrls[0],\r\n                    formController = $ctrls[1];\r\n\r\n                $scope.$watch($attrs.ngModel, function (newValue) {\r\n                    clearFieldErrors();\r\n                    clearFormErrors();\r\n                });\r\n\r\n                //-------------------\r\n\r\n                function clearFieldErrors() {\r\n                    var errors = fieldController.$error;\r\n\r\n                    for (var prop in errors) {\r\n                        if (errors.hasOwnProperty(prop) && prop.substring(0, 6) == 'ERROR_') {\r\n                            fieldController.$setValidity(prop, true);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                function clearFormErrors() {\r\n                    formController.$serverError = {};\r\n                };\r\n            }\r\n        };\r\n    });\r\n\r\n})();","/**\r\n * @file Drag & drop attachable behavior\r\n * @description\r\n * Based on https://github.com/fatlinesofcode/pipDraggable\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipDraggable\", ['pipUtils']);\r\n\r\n    thisModule.service('pipDraggable', function () {\r\n\r\n        var scope = this;\r\n        scope.inputEvent = function (event) {\r\n            if (angular.isDefined(event.touches)) {\r\n                return event.touches[0];\r\n            }\r\n            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n                return event.originalEvent.touches[0];\r\n            }\r\n            return event;\r\n        };\r\n\r\n    });\r\n\r\n    thisModule.directive('pipDrag', ['$rootScope', '$parse', '$document', '$window', 'pipDraggable', 'pipUtils', function ($rootScope, $parse, $document, $window, pipDraggable, pipUtils) {\r\n            return {\r\n\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    scope.value = attrs.ngDrag;\r\n                    var offset, _centerAnchor = false, _mx, _my, _tx, _ty, _mrx, _mry;\r\n                    var _hasTouch = ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;\r\n                    var _pressEvents = 'touchstart mousedown';\r\n                    var _moveEvents = 'touchmove mousemove';\r\n                    var _releaseEvents = 'touchend mouseup';\r\n                    var _dragHandle;\r\n\r\n                    // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n                    var _myid = scope.$id;\r\n                    var _data = null;\r\n\r\n                    var _dragOffset = null;\r\n\r\n                    var _dragEnabled = false;\r\n\r\n                    var _pressTimer = null;\r\n\r\n                    var onDragStartCallback = $parse(attrs.pipDragStart) || null;\r\n                    var onDragStopCallback = $parse(attrs.pipDragStop) || null;\r\n                    var onDragSuccessCallback = $parse(attrs.pipDragSuccess) || null;\r\n                    var allowTransform = angular.isDefined(attrs.allowTransform) ? scope.$eval(attrs.allowTransform) : false;\r\n\r\n                    var getDragData = $parse(attrs.pipDragData);\r\n                    var\r\n                        verticalScroll = pipUtils.toBoolean(attrs.pipVerticalScroll) || true,\r\n                        horizontalScroll = pipUtils.toBoolean(attrs.pipHorizontalScroll) || true,\r\n                        activationDistance = parseFloat(attrs.pipActivationDistance) || 75,\r\n                        scrollDistance = parseFloat(attrs.pipScrollDistance) || 50,\r\n                        scrollParent = false,\r\n\r\n                        scrollContainer = angular.element(window),\r\n                        scrollContainerGetter = $parse(attrs.pipScrollContainer);\r\n\r\n                    // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n                    var _deregisterRootMoveListener = angular.noop;\r\n\r\n                    var initialize = function () {\r\n                        element.attr('pip-draggable', 'false'); // prevent native drag\r\n                        // check to see if drag handle(s) was specified\r\n                        // if querySelectorAll is available, we use this instead of find\r\n                        // as JQLite find is limited to tagnames\r\n                        if (element[0].querySelectorAll) {\r\n                            var dragHandles = angular.element(element[0].querySelectorAll('[pip-drag-handle]'));\r\n                        } else {\r\n                            var dragHandles = element.find('[pip-drag-handle]');\r\n                        }\r\n                        if (dragHandles.length) {\r\n                            _dragHandle = dragHandles;\r\n                        }\r\n                        toggleListeners(true);\r\n\r\n                        // Initialize scroll container\r\n                        if (scrollParent) {\r\n                            scrollContainer = angular.element($element.parent());\r\n                        } else if (attrs.pipScrollContainer) {\r\n                            scrollContainer = angular.element(scrollContainerGetter(scope));\r\n                        } else {\r\n                            scrollContainer = angular.element(window);\r\n                        }\r\n                    };\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        if (!enable)return;\r\n                        // add listeners.\r\n\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$watch(attrs.pipDrag, onEnableChange);\r\n                        scope.$watch(attrs.pipCenterAnchor, onCenterAnchor);\r\n                        // wire up touch events\r\n                        if (_dragHandle) {\r\n                            // handle(s) specified, use those to initiate drag\r\n                            _dragHandle.on(_pressEvents, onpress);\r\n                        } else {\r\n                            // no handle(s) specified, use the element as the handle\r\n                            element.on(_pressEvents, onpress);\r\n                        }\r\n                        if (!_hasTouch && element[0].nodeName.toLowerCase() == \"img\") {\r\n                            element.on('mousedown', function () {\r\n                                return false;\r\n                            }); // prevent native drag for images\r\n                        }\r\n                    };\r\n                    var onDestroy = function (enable) {\r\n                        toggleListeners(false);\r\n                    };\r\n                    var onEnableChange = function (newVal, oldVal) {\r\n                        _dragEnabled = (newVal);\r\n                    };\r\n                    var onCenterAnchor = function (newVal, oldVal) {\r\n                        if (angular.isDefined(newVal))\r\n                            _centerAnchor = (newVal || 'true');\r\n                    };\r\n\r\n                    var isClickableElement = function (evt) {\r\n                        return (\r\n                            angular.isDefined(angular.element(evt.target).attr(\"pip-cancel-drag\"))\r\n                        );\r\n                    };\r\n                    /*\r\n                     * When the element is clicked start the drag behaviour\r\n                     * On touch devices as a small delay so as not to prevent native window scrolling\r\n                     */\r\n                    var onpress = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n\r\n                        if (isClickableElement(evt)) {\r\n                            return;\r\n                        }\r\n\r\n                        if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                            // Do not start dragging on right-click\r\n                            return;\r\n                        }\r\n\r\n                        if (_hasTouch) {\r\n                            cancelPress();\r\n                            _pressTimer = setTimeout(function () {\r\n                                cancelPress();\r\n                                onlongpress(evt);\r\n                            }, 100);\r\n                            $document.on(_moveEvents, cancelPress);\r\n                            $document.on(_releaseEvents, cancelPress);\r\n                        } else {\r\n                            onlongpress(evt);\r\n                        }\r\n\r\n                    };\r\n\r\n                    var cancelPress = function () {\r\n                        clearTimeout(_pressTimer);\r\n                        $document.off(_moveEvents, cancelPress);\r\n                        $document.off(_releaseEvents, cancelPress);\r\n                    };\r\n\r\n                    var onlongpress = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        offset = element[0].getBoundingClientRect();\r\n                        if (allowTransform)\r\n                            _dragOffset = offset;\r\n                        else {\r\n                            _dragOffset = {left: document.body.scrollLeft, top: document.body.scrollTop};\r\n                        }\r\n\r\n\r\n                        element.centerX = element[0].offsetWidth / 2;\r\n                        element.centerY = element[0].offsetHeight / 2;\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n                        _mrx = _mx - offset.left;\r\n                        _mry = _my - offset.top;\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - $window.pageXOffset;\r\n                            _ty = _my - element.centerY - $window.pageYOffset;\r\n                        } else {\r\n                            _tx = _mx - _mrx - $window.pageXOffset;\r\n                            _ty = _my - _mry - $window.pageYOffset;\r\n                        }\r\n\r\n                        $document.on(_moveEvents, onmove);\r\n                        $document.on(_releaseEvents, onrelease);\r\n                        // This event is used to receive manually triggered mouse move events\r\n                        // jqLite unfortunately only supports triggerHandler(...)\r\n                        // See http://api.jquery.com/triggerHandler/\r\n                        // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n                        _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function (event, origEvent) {\r\n                            onmove(origEvent);\r\n                        });\r\n                    };\r\n\r\n                    var onmove = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        if (!element.hasClass('pip-dragging')) {\r\n                            _data = getDragData(scope);\r\n                            element.addClass('pip-dragging');\r\n                            $rootScope.$broadcast('draggable:start', {\r\n                                x: _mx,\r\n                                y: _my,\r\n                                tx: _tx,\r\n                                ty: _ty,\r\n                                event: evt,\r\n                                element: element,\r\n                                data: _data\r\n                            });\r\n\r\n                            if (onDragStartCallback) {\r\n                                scope.$apply(function () {\r\n                                    onDragStartCallback(scope, {$data: _data, $event: evt});\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n\r\n                        if (horizontalScroll || verticalScroll) {\r\n                            dragToScroll();\r\n                        }\r\n\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - _dragOffset.left;\r\n                            _ty = _my - element.centerY - _dragOffset.top;\r\n                        } else {\r\n                            _tx = _mx - _mrx - _dragOffset.left;\r\n                            _ty = _my - _mry - _dragOffset.top;\r\n                        }\r\n\r\n                        moveElement(_tx, _ty);\r\n\r\n                        $rootScope.$broadcast('draggable:move', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            uid: _myid,\r\n                            dragOffset: _dragOffset\r\n                        });\r\n                    };\r\n\r\n                    var onrelease = function (evt) {\r\n                        if (!_dragEnabled)\r\n                            return;\r\n                        evt.preventDefault();\r\n                        $rootScope.$broadcast('draggable:end', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            callback: onDragComplete,\r\n                            uid: _myid\r\n                        });\r\n                        element.removeClass('pip-dragging');\r\n                        element.parent().find('.pip-drag-enter').removeClass('pip-drag-enter');\r\n                        reset();\r\n                        $document.off(_moveEvents, onmove);\r\n                        $document.off(_releaseEvents, onrelease);\r\n\r\n                        if (onDragStopCallback) {\r\n                            scope.$apply(function () {\r\n                                onDragStopCallback(scope, {$data: _data, $event: evt});\r\n                            });\r\n                        }\r\n\r\n                        _deregisterRootMoveListener();\r\n                    };\r\n\r\n                    var onDragComplete = function (evt) {\r\n\r\n\r\n                        if (!onDragSuccessCallback)return;\r\n\r\n                        scope.$apply(function () {\r\n                            onDragSuccessCallback(scope, {$data: _data, $event: evt});\r\n                        });\r\n                    };\r\n\r\n                    var reset = function () {\r\n                        if (allowTransform)\r\n                            element.css({transform: '', 'z-index': '', '-webkit-transform': '', '-ms-transform': ''});\r\n                        else\r\n                            element.css({'position': '', top: '', left: '', 'z-index': '', width: ''});\r\n                    };\r\n\r\n                    var moveElement = function (x, y) {\r\n                        var eWidth = element.css('width');\r\n                        if (allowTransform) {\r\n                            element.css({\r\n                                transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                'z-index': 99999,\r\n                                '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n                            });\r\n                        } else {\r\n                            element.css({\r\n                                'left': x + 'px',\r\n                                'top': y + 'px',\r\n                                'position': 'fixed',\r\n                                'z-index': 100,\r\n                                width: eWidth\r\n                            });\r\n                        }\r\n                    };\r\n\r\n                    var dragToScroll = function () {\r\n                        var scrollX = 0, scrollY = 0,\r\n                            offset = function (element) {\r\n                                return element.offset() || {left: 0, top: 0};\r\n                            };\r\n\r\n                        if (horizontalScroll) {\r\n                            var\r\n                                containerLeft = offset(scrollContainer).left,\r\n                                containerWidth = scrollContainer.innerWidth(),\r\n                                containerRight = containerLeft + containerWidth;\r\n\r\n                            if ((_mx - containerLeft) < activationDistance) {\r\n                                scrollX = -scrollDistance;\r\n                            }\r\n                            else if ((containerRight - _mx) < activationDistance) {\r\n                                scrollX = scrollDistance;\r\n                            }\r\n                        }\r\n\r\n                        if (verticalScroll) {\r\n                            var\r\n                                containerTop = offset(scrollContainer).top,\r\n                                containerHeight = scrollContainer.innerHeight(),\r\n                                containerBottom = containerTop + containerHeight;\r\n\r\n                            if ((_my - containerTop) < activationDistance) {\r\n                                scrollY = -scrollDistance + 30;\r\n                            }\r\n                            else if ((containerBottom - _my) < activationDistance) {\r\n                                scrollY = scrollDistance - 30;\r\n                            }\r\n                        }\r\n                        if (scrollX !== 0 || scrollY !== 0) {\r\n                            var\r\n                                containerScrollLeft = scrollContainer.scrollLeft(),\r\n                                containerScrollTop = scrollContainer.scrollTop();\r\n\r\n                            scrollContainer.scrollLeft(containerScrollLeft + scrollX);\r\n                            scrollContainer.scrollTop(containerScrollTop + scrollY);\r\n                        }\r\n\r\n                    };\r\n\r\n                    initialize();\r\n                }\r\n            };\r\n        }]);\r\n\r\n    thisModule.directive('pipDrop', ['$parse', '$timeout', '$window', '$document', 'pipDraggable', function ($parse, $timeout, $window, $document, pipDraggable) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                scope.value = attrs.pipDrop;\r\n                scope.isTouching = false;\r\n\r\n                var _lastDropTouch = null;\r\n\r\n                var _myid = scope.$id;\r\n\r\n                var _dropEnabled = false;\r\n\r\n                var onDropCallback = $parse(attrs.pipDropSuccess);// || function(){};\r\n\r\n                var onDragStartCallback = $parse(attrs.pipDragStart);\r\n                var onDragStopCallback = $parse(attrs.pipDragStop);\r\n                var onDragMoveCallback = $parse(attrs.pipDragMove);\r\n\r\n                var initialize = function () {\r\n                    toggleListeners(true);\r\n                };\r\n\r\n                var toggleListeners = function (enable) {\r\n                    // remove listeners\r\n\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    scope.$watch(attrs.pipDrop, onEnableChange);\r\n                    scope.$on('$destroy', onDestroy);\r\n                    scope.$on('draggable:start', onDragStart);\r\n                    scope.$on('draggable:move', onDragMove);\r\n                    scope.$on('draggable:end', onDragEnd);\r\n                };\r\n\r\n                var onDestroy = function (enable) {\r\n                    toggleListeners(false);\r\n                };\r\n                var onEnableChange = function (newVal, oldVal) {\r\n                    _dropEnabled = newVal;\r\n                };\r\n                var onDragStart = function (evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragStart) {\r\n                        $timeout(function () {\r\n                            onDragStartCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                };\r\n                var onDragMove = function (evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragMove) {\r\n                        $timeout(function () {\r\n                            onDragMoveCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                };\r\n\r\n                var onDragEnd = function (evt, obj) {\r\n\r\n                    // don't listen to drop events if this is the element being dragged\r\n                    // only update the styles and return\r\n                    if (!_dropEnabled || _myid === obj.uid) {\r\n                        updateDragStyles(false, obj.element);\r\n                        return;\r\n                    }\r\n                    if (isTouching(obj.x, obj.y, obj.element)) {\r\n                        // call the pipDraggable pipDragSuccess element callback\r\n                        if (obj.callback) {\r\n                            obj.callback(obj);\r\n                        }\r\n\r\n                        if (attrs.pipDropSuccess) {\r\n                            $timeout(function () {\r\n                                onDropCallback(scope, {\r\n                                    $data: obj.data,\r\n                                    $event: obj,\r\n                                    $target: scope.$eval(scope.value)\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (attrs.pipDragStop) {\r\n                        $timeout(function () {\r\n                            onDragStopCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n\r\n                    updateDragStyles(false, obj.element);\r\n                };\r\n\r\n                var isTouching = function (mouseX, mouseY, dragElement) {\r\n                    var touching = hitTest(mouseX, mouseY);\r\n                    scope.isTouching = touching;\r\n                    if (touching) {\r\n                        _lastDropTouch = element;\r\n                    }\r\n                    updateDragStyles(touching, dragElement);\r\n                    return touching;\r\n                };\r\n\r\n                var updateDragStyles = function (touching, dragElement) {\r\n                    if (touching) {\r\n                        element.addClass('pip-drag-enter');\r\n                        dragElement.addClass('pip-drag-over');\r\n                    } else if (_lastDropTouch == element) {\r\n                        _lastDropTouch = null;\r\n                        element.removeClass('pip-drag-enter');\r\n                        dragElement.removeClass('pip-drag-over');\r\n                    }\r\n                };\r\n\r\n                var hitTest = function (x, y) {\r\n                    var bounds = element[0].getBoundingClientRect();\r\n                    x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;\r\n                    y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;\r\n                    return x >= bounds.left\r\n                        && x <= bounds.right\r\n                        && y <= bounds.bottom\r\n                        && y >= bounds.top;\r\n                };\r\n\r\n                initialize();\r\n            }\r\n        };\r\n    }]);\r\n\r\n    //thisModule.directive('pipDragClone', ['$parse', '$timeout', 'pipDraggable', function ($parse, $timeout, pipDraggable) {\r\n    //    return {\r\n    //        restrict: 'A',\r\n    //        link: function (scope, element, attrs) {\r\n    //            var img, _allowClone = true;\r\n    //            var _dragOffset = null;\r\n    //            scope.clonedData = {};\r\n    //            var initialize = function () {\r\n//\r\n    //                img = element.find('img');\r\n    //                element.attr('pip-draggable', 'false');\r\n    //                img.attr('draggable', 'false');\r\n    //                reset();\r\n    //                toggleListeners(true);\r\n    //            };\r\n//\r\n//\r\n    //            var toggleListeners = function (enable) {\r\n    //                // remove listeners\r\n//\r\n    //                if (!enable)return;\r\n    //                // add listeners.\r\n    //                scope.$on('draggable:start', onDragStart);\r\n    //                scope.$on('draggable:move', onDragMove);\r\n    //                scope.$on('draggable:end', onDragEnd);\r\n    //                preventContextMenu();\r\n//\r\n    //            };\r\n    //            var preventContextMenu = function () {\r\n    //                //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //            };\r\n    //            var onDragStart = function (evt, obj, elm) {\r\n    //                _allowClone = true;\r\n    //                if (angular.isDefined(obj.data.allowClone)) {\r\n    //                    _allowClone = obj.data.allowClone;\r\n    //                }\r\n    //                if (_allowClone) {\r\n    //                    scope.$apply(function () {\r\n    //                        scope.clonedData = obj.data;\r\n    //                    });\r\n    //                    element.css('width', obj.element[0].offsetWidth);\r\n    //                    element.css('height', obj.element[0].offsetHeight);\r\n//\r\n    //                    moveElement(obj.tx, obj.ty);\r\n    //                }\r\n//\r\n    //            };\r\n    //            var onDragMove = function (evt, obj) {\r\n    //                if (_allowClone) {\r\n//\r\n    //                    _tx = obj.tx + obj.dragOffset.left;\r\n    //                    _ty = obj.ty + obj.dragOffset.top;\r\n//\r\n    //                    moveElement(_tx, _ty);\r\n    //                }\r\n    //            };\r\n    //            var onDragEnd = function (evt, obj) {\r\n    //                //moveElement(obj.tx,obj.ty);\r\n    //                if (_allowClone) {\r\n    //                    reset();\r\n    //                }\r\n    //            };\r\n//\r\n    //            var reset = function () {\r\n    //                element.css({left: 0, top: 0, position: 'fixed', 'z-index': -1, visibility: 'hidden'});\r\n    //            };\r\n    //            var moveElement = function (x, y) {\r\n    //                element.css({\r\n    //                    transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    'z-index': 99999,\r\n    //                    'visibility': 'visible',\r\n    //                    '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n    //                    //,margin: '0'  don't monkey with the margin,\r\n    //                });\r\n    //            };\r\n//\r\n    //            var absorbEvent_ = function (event) {\r\n    //                var e = event;//.originalEvent;\r\n    //                e.preventDefault && e.preventDefault();\r\n    //                e.stopPropagation && e.stopPropagation();\r\n    //                e.cancelBubble = true;\r\n    //                e.returnValue = false;\r\n    //                return false;\r\n    //            };\r\n//\r\n    //            initialize();\r\n    //        }\r\n    //    };\r\n    //}]);\r\n\r\n    thisModule.directive('pipPreventDrag', ['$parse', '$timeout', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                var initialize = function () {\r\n\r\n                    element.attr('pip-draggable', 'false');\r\n                    toggleListeners(true);\r\n                };\r\n\r\n\r\n                var toggleListeners = function (enable) {\r\n                    // remove listeners\r\n\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                };\r\n\r\n\r\n                var absorbEvent_ = function (event) {\r\n                    var e = event.originalEvent;\r\n                    e.preventDefault && e.preventDefault();\r\n                    e.stopPropagation && e.stopPropagation();\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n                    return false;\r\n                };\r\n\r\n                initialize();\r\n            }\r\n        };\r\n    }]);\r\n\r\n    thisModule.directive('pipCancelDrag', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                element.find('*').attr('pip-cancel-drag', 'pip-cancel-drag');\r\n            }\r\n        };\r\n    });\r\n})();\r\n\r\n","/**\r\n * @file Directive to show confirmation dialog when user tries to leave page with unsaved changes.\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFabTooltipVisibility\", []);\r\n\r\n    thisModule.directive(\"pipFabTooltipVisibility\", ['$parse', '$timeout', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: ['$scope', '$attrs', function($scope, $attrs) {\r\n                var trigGetter = $parse($attrs.pipFabTooltipVisibility),\r\n                    showGetter = $parse($attrs.pipFabShowTooltip),\r\n                    showSetter = showGetter.assign;\r\n\r\n                $scope.$watch(trigGetter, function(isOpen) {\r\n                    if (isOpen) {\r\n                        $timeout(function() {\r\n                            showSetter($scope, isOpen);\r\n                        }, 600);\r\n                    } else {\r\n                        showSetter($scope, isOpen);\r\n                    }\r\n                });\r\n            }]\r\n        };\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Keyboard navigation over few focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFocused\", []);\r\n\r\n    thisModule.directive('pipFocused', ['$timeout', '$mdConstant', function($timeout, $mdConstant) {\r\n        return {\r\n            require: \"?ngModel\",\r\n            link: function ($scope, $element, $attrs) {\r\n                var controls, controlsLength,\r\n                    withHidden = $attrs.pipWithHidden;\r\n\r\n                $timeout(init);\r\n                $element.on('keydown', keydownListener);\r\n\r\n                $scope.$watch($attrs.ngModel, function () {\r\n                    $timeout(init);\r\n                }, true);\r\n\r\n                function init() {\r\n                    var selector = withHidden ? '.pip-focusable' : '.pip-focusable:visible';\r\n                    controls = $element.find(selector);\r\n                    controlsLength = controls.length;\r\n\r\n                    // add needed event listeners\r\n                    controls.on('focus', function () {\r\n                        $element.addClass('pip-focused-container');\r\n                        $(this).addClass('md-focused');\r\n                    }).on('focusout', function () {\r\n                        $element.removeClass('pip-focused-container');\r\n                    });\r\n                }\r\n\r\n                function keydownListener(e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n\r\n                        var \r\n                            increment = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            moveToControl = controls.index(controls.filter(\".md-focused\")) + increment;\r\n\r\n                        // Move focus to next control\r\n                        if (moveToControl >= 0 && moveToControl < controlsLength) {\r\n                            controls[moveToControl].focus();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Infinite scrolling behavior\r\n * @description\r\n * Modified from https://github.com/sroze/ngInfiniteScroll\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipInfiniteScroll\", []);\r\n\r\n    thisModule.directive('pipInfiniteScroll', \r\n        ['$rootScope', '$window', '$interval', '$parse', function($rootScope, $window, $interval, $parse) {\r\n            var THROTTLE_MILLISECONDS = 500;\r\n\r\n            return {\r\n                scope: {\r\n                    pipInfiniteScroll: '&',\r\n                    pipScrollContainer: '=',\r\n                    pipScrollDistance: '=',\r\n                    pipScrollDisabled: '=',\r\n                    pipScrollUseDocumentBottom: '=',\r\n                    pipScrollListenForEvent: '@'\r\n                },\r\n                link: function($scope, $element, $attrs) {\r\n                    var \r\n                        checkWhenEnabled = null,\r\n                        scrollContainer,\r\n                        immediateCheck = true,\r\n                        scrollDistance = null,\r\n                        scrollEnabled = null, \r\n                        unregisterEventListener = null,\r\n                        useDocumentBottom = false, \r\n                        windowElement = angular.element($window);\r\n                    \r\n                    function height(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(element.offsetHeight)) {\r\n                            return element.document.documentElement.clientHeight;\r\n                        } else {\r\n                            return element.offsetHeight;\r\n                        }\r\n                    };\r\n\r\n                    function offsetTop(element) {\r\n                        if (!element[0].getBoundingClientRect || element.css('none')) {\r\n                            return;\r\n                        }\r\n                        return element[0].getBoundingClientRect().top + pageYOffset(element);\r\n                    };\r\n\r\n                    function pageYOffset(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(window.pageYOffset)) {\r\n                            return element.document.documentElement.scrollTop;\r\n                        } else {\r\n                            return element.ownerDocument.defaultView.pageYOffset;\r\n                        }\r\n                    };\r\n\r\n                    var onContainerScroll = function() {\r\n                        var \r\n                            containerBottom, \r\n                            containerTopOffset, \r\n                            elementBottom, \r\n                            remaining, \r\n                            shouldScroll;\r\n                                                \r\n                        if (scrollContainer === windowElement) {\r\n                            containerBottom = height(scrollContainer) + pageYOffset(scrollContainer[0].document.documentElement);\r\n                            elementBottom = offsetTop($element) + height($element);\r\n                        } else {\r\n                            containerBottom = height(scrollContainer);\r\n                            containerTopOffset = 0;\r\n                            if (offsetTop(scrollContainer) !== void 0) {\r\n                                containerTopOffset = offsetTop(scrollContainer);\r\n                            }\r\n                            elementBottom = offsetTop($element) - containerTopOffset + height($element);\r\n                        }\r\n\r\n                        if (useDocumentBottom) {\r\n                            elementBottom = height(($element[0].ownerDocument || $element[0].document).documentElement);\r\n                        }\r\n\r\n                        remaining = elementBottom - containerBottom;\r\n                        shouldScroll = remaining <= height(scrollContainer) * scrollDistance + 1;\r\n                        \r\n                        if (shouldScroll) {\r\n                            checkWhenEnabled = true;\r\n                            if (scrollEnabled) {\r\n                                if ($scope.$$phase || $rootScope.$$phase) {\r\n                                    return $scope.pipInfiniteScroll();\r\n                                } else {\r\n                                    return $scope.$apply($scope.pipInfiniteScroll);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            return checkWhenEnabled = false;\r\n                        }\r\n                    };\r\n\r\n                    if (THROTTLE_MILLISECONDS != null) {\r\n                        onContainerScroll = _.throttle(onContainerScroll, THROTTLE_MILLISECONDS);                    \r\n                    }\r\n\r\n                    $scope.$on('$destroy', function() {\r\n                        scrollContainer.unbind('scroll', onContainerScroll);\r\n                        if (unregisterEventListener != null) {\r\n                            unregisterEventListener();\r\n                            return unregisterEventListener = null;\r\n                        }\r\n                    });\r\n\r\n                    function handleScrollDistance(v) {\r\n                        return scrollDistance = parseFloat(v) || 0;\r\n                    };\r\n                    $scope.$watch('pipScrollDistance', handleScrollDistance);\r\n                    handleScrollDistance($scope.pipScrollDistance);\r\n                    \r\n                    function handleScrollDisabled(v) {\r\n                        scrollEnabled = !v;\r\n                        if (scrollEnabled && checkWhenEnabled) {\r\n                            checkWhenEnabled = false;\r\n                            return onContainerScroll();\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollDisabled', handleScrollDisabled);\r\n                    handleScrollDisabled($scope.pipScrollDisabled);\r\n\r\n                    function handleScrollUseDocumentBottom(v) {\r\n                        return useDocumentBottom = v;\r\n                    };\r\n                    $scope.$watch('pipScrollUseDocumentBottom', handleScrollUseDocumentBottom);\r\n                    handleScrollUseDocumentBottom($scope.pipScrollUseDocumentBottom);\r\n\r\n                    function changeContainer(newContainer) {\r\n                        if (scrollContainer != null) {\r\n                            scrollContainer.unbind('scroll', onContainerScroll);\r\n                        }\r\n\r\n                        scrollContainer = newContainer;\r\n                        if (newContainer != null) {\r\n                            return scrollContainer.bind('scroll', onContainerScroll);\r\n                        }\r\n                    };\r\n\r\n                    changeContainer(windowElement);\r\n                    if ($scope.pipScrollListenForEvent) {\r\n                        unregisterEventListener = $rootScope.$on($scope.pipScrollListenForEvent, onContainerScroll);\r\n                    }\r\n\r\n                    function handleScrollContainer(newContainer) {\r\n                        if ((newContainer == null) || newContainer.length === 0) {\r\n                            return;\r\n                        }\r\n                        if (newContainer instanceof HTMLElement) {\r\n                            newContainer = angular.element(newContainer);\r\n                        } else if (typeof newContainer.append === 'function') {\r\n                            newContainer = angular.element(newContainer[newContainer.length - 1]);\r\n                        } else if (typeof newContainer === 'string') {\r\n                            newContainer = $element.parents().find(newContainer);\r\n                        }\r\n\r\n                        if (newContainer != null && (!Array.isArray(newContainer) ||\r\n                            (Array.isArray(newContainer) && newContainer.length > 0))) {\r\n                            return changeContainer(newContainer);\r\n                        } else {\r\n                            throw new Error(\"Invalid pip-scroll-container attribute.\");\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollContainer', function (newContainer) {\r\n                        if (newContainer !== scrollContainer)\r\n                            handleScrollContainer(newContainer);\r\n                    });\r\n                    handleScrollContainer($scope.pipScrollContainer || []);\r\n                    \r\n                    if ($attrs.pipScrollParent != null) {\r\n                        changeContainer(angular.element($element.parent()));\r\n                    }\r\n                    if ($attrs.pipScrolImmediateCheck != null) {\r\n                        immediateCheck = $scope.$eval($attrs.pipScrolImmediateCheck);\r\n                    }\r\n                    \r\n                    return $interval((function() {\r\n                        if (immediateCheck) {\r\n                            return onContainerScroll();\r\n                        }\r\n                    }), 0, 1);\r\n                }\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipSelected\", ['pipUtils']);\r\n\r\n    thisModule.directive('pipSelected',['$parse', 'pipUtils', '$mdConstant', '$timeout', function ($parse, pipUtils, $mdConstant, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            link: function ($scope, $element, $attrs) {\r\n                var\r\n                    indexGetter = $attrs.pipSelected ? $parse($attrs.pipSelected) : null,\r\n                    indexSetter = indexGetter ? indexGetter.assign : null,\r\n                    idGetter = $attrs.pipSelectedId ? $parse($attrs.pipSelectedId) : null,\r\n                    idSetter = idGetter ? idGetter.assign : null,\r\n                    changeGetter = $attrs.pipSelect ? $parse($attrs.pipSelect) : null,\r\n                    enterSpaceGetter = $attrs.pipEnterSpacePress ? $parse($attrs.pipEnterSpacePress) : null,\r\n                    noScroll = pipUtils.toBoolean($attrs.pipNoScroll),\r\n                    modifier = pipUtils.toBoolean($attrs.pipSkipHidden) ? ':visible' : '',\r\n                    className = pipUtils.toBoolean($attrs.pipTreeList) ? '.pip-selectable-tree' : '.pip-selectable',\r\n                    selectedIndex = indexGetter($scope),\r\n                    currentElementTabinex = $element.attr('tabindex'),\r\n                    pipSelectedWatch = $attrs.pipSelectedWatch;\r\n\r\n                // Set tabindex if it's not set yet\r\n                $element.attr('tabindex', currentElementTabinex || 0);\r\n\r\n                // Watch selected item index\r\n                if (!pipUtils.toBoolean($attrs.pipTreeList)) {\r\n                    $scope.$watch(indexGetter, function(newSelectedIndex) {\r\n                        selectItem({itemIndex: newSelectedIndex});\r\n                    });\r\n                } else {\r\n                    $scope.$watch(idGetter, function(newSelectedId) {\r\n                        setTimeout(function () {\r\n                            selectItem({itemId: newSelectedId, raiseEvent: true});\r\n                        }, 0);\r\n                    });\r\n                }\r\n\r\n                // Watch resync selection\r\n                if (pipSelectedWatch) {\r\n                    $scope.$watch(pipSelectedWatch, function() {\r\n                        // Delay update to allow ng-repeat to update DOM\r\n                        setTimeout(function() {\r\n                            selectedIndex = indexGetter($scope);\r\n                            selectItem({itemIndex: selectedIndex});\r\n                        }, 100);\r\n                    });\r\n                }\r\n\r\n                // Select item defined by index\r\n                selectItem({itemIndex: selectedIndex, items: $element.find(className)});\r\n\r\n                // Functions and listeners\r\n\r\n                function selectItem(itemParams) {\r\n                    var itemIndex = itemParams.itemIndex,\r\n                        itemId = itemParams.itemId,\r\n                        items = itemParams.items || $element.find(className + modifier),\r\n                        itemsLength = items.length,\r\n                        item = (function () {\r\n                            if (itemParams.item) return itemParams.item;\r\n                            if (itemIndex === undefined && itemIndex === -1) {\r\n                                itemIndex = items.index(items.filter('[pip-id=' + itemId + ']'));\r\n                            }\r\n                            if (itemIndex >= 0 && itemIndex < itemsLength) {\r\n                                return items[itemIndex]\r\n                            }\r\n                        }()),\r\n                        raiseEvent = itemParams.raiseEvent;\r\n\r\n                    if (item) {\r\n                        $element.find(className).removeClass('selected md-focused');\r\n                        item = angular.element(item)\r\n                            .addClass('selected md-focused')\r\n                            .focus(); // todo сдвигает список тут, на первом проходе\r\n                        if (!noScroll) scrollToItem(item);\r\n                        if (raiseEvent) defineSelectedIndex(items);\r\n                    }\r\n                };\r\n\r\n                function defineSelectedIndex(items) {\r\n                    var oldSelectedIndex = selectedIndex;\r\n                    selectedIndex = -1;\r\n                    for (var index = 0; index < items.length; index++) {\r\n                        if ($(items[index]).hasClass('selected')) {\r\n                            selectedIndex = index;\r\n\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // Execute callback to notify about item select\r\n                    if (oldSelectedIndex != selectedIndex && selectedIndex !== -1) {\r\n                        $scope.$apply(updateIndex);\r\n                    }\r\n\r\n                    function updateIndex() {\r\n                        var selectedItem = angular.element(items[selectedIndex]),\r\n                            selectedId = selectedItem.attr('pip-id');\r\n\r\n                        if (indexSetter) indexSetter($scope, selectedIndex);\r\n                        if (idSetter) idSetter($scope, selectedId);\r\n                        if (changeGetter) {\r\n                            changeGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    item: selectedItem,\r\n                                    index: selectedIndex,\r\n                                    id: selectedId,\r\n                                    newIndex: selectedIndex,\r\n                                    oldIndex: oldSelectedIndex\r\n                                }\r\n                            });\r\n                        }\r\n                    };\r\n                };\r\n\r\n                function scrollToItem($item) {\r\n                    if (noScroll) return;\r\n\r\n                    var\r\n                        containerTop = $element.offset().top,\r\n                        containerHeight = $element.height(),\r\n                        containerBottom = containerTop + containerHeight,\r\n                        itemTop = $item.offset().top,\r\n                        itemHeight = $item.outerHeight(true),\r\n                        itemBottom = itemTop + itemHeight,\r\n                        containerScrollTop = $element.scrollTop();\r\n\r\n                    if (containerTop > itemTop) {\r\n                        $element.scrollTop(containerScrollTop + itemTop - containerTop);\r\n                    }\r\n                    else if (containerBottom < itemBottom) {\r\n                        $element.scrollTop(containerScrollTop + itemBottom - containerBottom);\r\n                    }\r\n\r\n                };\r\n\r\n                $element.on('click touchstart', className, function (event) {\r\n                    selectItem({item: event.currentTarget, raiseEvent: true});\r\n                });\r\n\r\n                $element.on('keydown', function (e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.ENTER || keyCode == $mdConstant.KEY_CODE.SPACE) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        if (enterSpaceGetter) {\r\n                            enterSpaceGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    index: selectedIndex,\r\n                                    item: $element.find('.selected')\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    } else\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW || keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        // Get next selectable control index\r\n                        var items = $element.find(className + modifier),\r\n                            inc = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            newSelectedIndex = selectedIndex + inc;\r\n\r\n                        // Set next control as selected\r\n                        selectItem({itemIndex: newSelectedIndex, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusin', function (event) {\r\n                    // Choose selected element\r\n                    var items,\r\n                        selectedItem = $element.find(className + '.selected');\r\n\r\n                    selectedItem.addClass('md-focused');\r\n\r\n                    // If there are not selected elements then pick the first one\r\n                    if (selectedItem.length === 0) {\r\n                        selectedIndex = indexGetter($scope);\r\n                        items = $element.find(className + modifier);\r\n                        selectItem({itemIndex: selectedIndex || 0, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusout', function (event) {\r\n                    $element.find(className + '.md-focused' + modifier).removeClass('md-focused');\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Directive to show confirmation dialog when user tries to leave page with unsaved changes.\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipUnsavedChanges\", []);\r\n\r\n    thisModule.directive(\"pipUnsavedChanges\", ['$window', '$rootScope', function ($window, $rootScope) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                unsavedChangesAvailable: '&pipUnsavedChangesAvailable',\r\n                unsavedChangesMessage: '@pipUnsavedChangesMessage',\r\n                afterLeave: '&pipUnsavedChangesAfterLeave'\r\n            },\r\n            link: function($scope) {\r\n\r\n                $window.onbeforeunload = function() {\r\n                    if ($scope.unsavedChangesAvailable()) {\r\n                        $rootScope.$routing = false;\r\n                        return $scope.unsavedChangesMessage;\r\n                    }\r\n                };\r\n\r\n                var unbindFunc = $scope.$on('$stateChangeStart', function(event) {\r\n                    if ($scope.unsavedChangesAvailable() && !$window.confirm($scope.unsavedChangesMessage)) {\r\n                        $rootScope.$routing = false;\r\n                        event.preventDefault();\r\n                    } else {\r\n                        _.isFunction($scope.afterLeave) && $scope.afterLeave();\r\n                    }\r\n                });\r\n\r\n                $scope.$on('$destroy', function() {\r\n                    $window.onbeforeunload = null;\r\n                    unbindFunc();\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();","/**\r\n * @file Date formatting service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global _, angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDateFormat', ['pipUtils', 'pipTranslate']);\r\n\r\n\tthisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n\r\n        pipTranslateProvider.translations('en', {\r\n            // Months - 'MONTH_' + monthIndex\r\n            // start at 0 to match JS date format\r\n            'MONTH_1': 'January',\r\n            'MONTH_2': 'February',\r\n            'MONTH_3': 'March',\r\n            'MONTH_4': 'April',\r\n            'MONTH_5': 'May',\r\n            'MONTH_6': 'June',\r\n            'MONTH_7': 'July',\r\n            'MONTH_8': 'August',\r\n            'MONTH_9': 'September',\r\n            'MONTH_10': 'October',\r\n            'MONTH_11': 'November',\r\n            'MONTH_12': 'December',\r\n\r\n            'MONTH_LONG_1': 'January',\r\n            'MONTH_LONG_2': 'February',\r\n            'MONTH_LONG_3': 'March',\r\n            'MONTH_LONG_4': 'April',\r\n            'MONTH_LONG_5': 'May',\r\n            'MONTH_LONG_6': 'June',\r\n            'MONTH_LONG_7': 'July',\r\n            'MONTH_LONG_8': 'August',\r\n            'MONTH_LONG_9': 'September',\r\n            'MONTH_LONG_10': 'October',\r\n            'MONTH_LONG_11': 'November',\r\n            'MONTH_LONG_12': 'December',\r\n\r\n            'MONTH_SHORT_1': 'Jan',\r\n            'MONTH_SHORT_2': 'Feb',\r\n            'MONTH_SHORT_3': 'Mar',\r\n            'MONTH_SHORT_4': 'Apr',\r\n            'MONTH_SHORT_5': 'May',\r\n            'MONTH_SHORT_6': 'Jun',\r\n            'MONTH_SHORT_7': 'Jul',\r\n            'MONTH_SHORT_8': 'Aug',\r\n            'MONTH_SHORT_9': 'Sep',\r\n            'MONTH_SHORT_10': 'Oct',\r\n            'MONTH_SHORT_11': 'Nov',\r\n            'MONTH_SHORT_12': 'Dec',\r\n\r\n            // Days of the week - 'DAY_' + dayIndex\r\n            // start at 1 to match JS date format\r\n            'DAY_1': 'Monday',\r\n            'DAY_2': 'Tuesday',\r\n            'DAY_3': 'Wednesday',\r\n            'DAY_4': 'Thursday',\r\n            'DAY_5': 'Friday',\r\n            'DAY_6': 'Saturday',\r\n            'DAY_7': 'Sunday',\r\n\r\n            'ELAPSED_TODAY': 'Today',\r\n            'ELAPSED_YESTERDAY': 'Yesterday',\r\n            'ELAPSED_YEARS': 'y',\r\n            'ELAPSED_MONTHS': 'mth',\r\n            'ELAPSED_WEEKS': 'w',\r\n            'ELAPSED_DAYS': 'd',\r\n            'ELAPSED_HOURS': 'h',\r\n            'ELAPSED_MINUTES': 'm',\r\n            'ELAPSED_SECONDS': 's',\r\n            'ELAPSED_AT': 'at',\r\n            'ELAPSED_AGO': 'ago',\r\n            'ELAPSED_JUST_NOW': 'Just now',\r\n            'ELAPSED_FEW_MIN_AGO': 'Few min ago',\r\n            'ELAPSED_MIN_AGO': 'min ago',\r\n            'ELAPSED_HOUR_AGO': 'hour ago',\r\n            'ELAPSED_HOURS_AGO': 'hours ago',\r\n            'ELAPSED_HOURS_AGO_MORE_THAN_FIVE': 'hours ago'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            // Months - 'MONTH_' + monthIndex\r\n            // start at 0 to match JS date format\r\n            'MONTH_1': 'январь',\r\n            'MONTH_2': 'февраль',\r\n            'MONTH_3': 'март',\r\n            'MONTH_4': 'апрель',\r\n            'MONTH_5': 'май',\r\n            'MONTH_6': 'июнь',\r\n            'MONTH_7': 'июль',\r\n            'MONTH_8': 'август',\r\n            'MONTH_9': 'сентябрь',\r\n            'MONTH_10': 'октябрь',\r\n            'MONTH_11': 'ноябрь',\r\n            'MONTH_12': 'декабрь',\r\n\r\n            'MONTH_LONG_1': 'января',\r\n            'MONTH_LONG_2': 'февраля',\r\n            'MONTH_LONG_3': 'марта',\r\n            'MONTH_LONG_4': 'апреля',\r\n            'MONTH_LONG_5': 'мая',\r\n            'MONTH_LONG_6': 'июня',\r\n            'MONTH_LONG_7': 'июля',\r\n            'MONTH_LONG_8': 'августа',\r\n            'MONTH_LONG_9': 'сентября',\r\n            'MONTH_LONG_10': 'октября',\r\n            'MONTH_LONG_11': 'ноября',\r\n            'MONTH_LONG_12': 'декабря',\r\n\r\n            'MONTH_SHORT_1': 'янв',\r\n            'MONTH_SHORT_2': 'фев',\r\n            'MONTH_SHORT_3': 'мар',\r\n            'MONTH_SHORT_4': 'апр',\r\n            'MONTH_SHORT_5': 'май',\r\n            'MONTH_SHORT_6': 'июн',\r\n            'MONTH_SHORT_7': 'июл',\r\n            'MONTH_SHORT_8': 'авг',\r\n            'MONTH_SHORT_9': 'сен',\r\n            'MONTH_SHORT_10': 'окт',\r\n            'MONTH_SHORT_11': 'ноя',\r\n            'MONTH_SHORT_12': 'дек',\r\n\r\n            // Days of the week - 'DAY_' + dayIndex\r\n            // start at 1 to match JS date format\r\n            'DAY_1': 'понедельник',\r\n            'DAY_2': 'вторник',\r\n            'DAY_3': 'среда',\r\n            'DAY_4': 'четверг',\r\n            'DAY_5': 'пятница',\r\n            'DAY_6': 'суббота',\r\n            'DAY_7': 'воскресенье',\r\n\r\n            'ELAPSED_TODAY': 'Сегодня',\r\n            'ELAPSED_YESTERDAY': 'Вчера',\r\n            'ELAPSED_YEARS': 'г',\r\n            'ELAPSED_MONTHS': 'мц',\r\n            'ELAPSED_WEEKS': 'н',\r\n            'ELAPSED_DAYS': 'д',\r\n            'ELAPSED_HOURS': 'ч',\r\n            'ELAPSED_MINUTES': 'м',\r\n            'ELAPSED_SECONDS': 'с',\r\n            'ELAPSED_AT': 'в',\r\n            'ELAPSED_AGO': 'тн',\r\n            'ELAPSED_JUST_NOW': 'Только что',\r\n            'ELAPSED_FEW_MIN_AGO': 'Несколько мин тн',\r\n            'ELAPSED_MIN_AGO': 'мин тн',\r\n            'ELAPSED_HOUR_AGO': 'час тн',\r\n            'ELAPSED_HOURS_AGO': 'часа тн',\r\n            'ELAPSED_HOURS_AGO_MORE_THAN_FIVE': 'часов тн'\r\n        });\r\n\t\t\r\n\t}]);\r\n\r\n    thisModule.factory('pipDateFormat',\r\n        ['pipDates', 'pipTranslate', '$rootScope', function (pipDates, pipTranslate, $rootScope) {\r\n\r\n            return {\r\n                formatDate: formatDate,\r\n                formatLongDate: formatLongDate,\r\n                formatShortDate: formatShortDate,\r\n                formatShortDateWithYear: formatShortDateWithYear,\r\n                formatLongDateWithYear: formatLongDateWithYear,\r\n\r\n                formatLongMonth: formatLongMonth,\r\n                formatMonth: formatMonth,\r\n                formatYear: formatYear,\r\n                formatShortWeek: formatShortWeek,\r\n                formatShortDayAndMonth: formatShortDayAndMonth,\r\n                formatLongDayAndMonth: formatLongDayAndMonth,\r\n\r\n                formatDateRange: formatDateRange,\r\n                formatDateTimeRange: formatDateTimeRange,\r\n\r\n                formatTime: formatTime,\r\n                formatLongTime: formatLongTime,\r\n                formatShortTime: formatShortTime, \r\n\r\n                formatLongDateTime: formatLongDateTime,\r\n                formatShortDateTime: formatShortDateTime,\r\n\r\n                formatElapsedTime: formatElapsedTime,\r\n                formatElapsedInterval: formatElapsedInterval,\r\n\r\n                formatMillisecondsToSeconds: formatMillisecondsToSeconds\r\n            };\r\n\r\n\r\n            function twoDigits(value) {\r\n                return value < 10 ? '0' + value : value; \r\n            };\r\n\r\n            function formatDate(value, format, str) {\r\n                if (value == null) return '';\r\n\r\n                var\r\n                    strict = str || false,\r\n                    value = _.isDate(value) ? value : new Date(value),\r\n                    thisYear = new Date().getUTCFullYear(),\r\n                    year = value.getUTCFullYear(),\r\n                    month = value.getUTCMonth(),\r\n                    longMonthName = pipTranslate.translate('MONTH_LONG_' + (month + 1)),\r\n                    shortMonthName = pipTranslate.translate('MONTH_SHORT_' + (month + 1)),\r\n                    monthName = pipTranslate.translate('MONTH_' + (month + 1)),\r\n                    day = value.getUTCDate(),\r\n                    startWeek = pipDates.toStartWeek(value),\r\n                    endWeek = pipDates.toEndWeek(value, -1);\r\n\r\n                if (strict == false && format == 'd MMMM yyyy' && thisYear === year) {\r\n                        format = 'MMMM d';\r\n                }\r\n                if (strict == false && format == 'd MMM yyyy' && thisYear === year) {\r\n                        format = 'MMM d';\r\n                }\r\n                if ((format == 'MMM d') && $rootScope.$language == 'ru') {\r\n                        format = 'd MMM';\r\n                }\r\n                if ((format == 'MMMM d') && $rootScope.$language == 'ru') {\r\n                    format = 'd MMMM';\r\n                }\r\n\r\n                if (format == 'd MMMM yyyy')\r\n                    return '' + day + ' ' + longMonthName + ' ' + year\r\n                else if (format == 'MMMM d, yyyy')\r\n                    return '' + monthName + ' ' + day + ', ' + year\r\n                if (format == 'd MMM yyyy')\r\n                    return '' + day + ' ' + shortMonthName + ' ' + year\r\n                else if (format == 'MMM d, yyyy')\r\n                    return '' + shortMonthName + ' ' + day + ', ' + year\r\n                else if (format == 'd MMMM')\r\n                    return '' + day + ' ' + longMonthName\r\n                else if (format == 'd MMM')\r\n                    return '' + day + ' ' + shortMonthName\r\n                else if (format == 'MMM d')\r\n                    return '' + shortMonthName + ' ' + day;\r\n                else if (format == 'MMMM d')\r\n                    return '' + longMonthName + ' ' + day;\r\n                else if (format == 'yyyy/M/d')\r\n                    return '' + year + '/' + month + '/' + day;\r\n                else if (format == 'yyy-M-d')\r\n                    return '' + year + '-' + month + '-' + day;\r\n                else if (format == 'MMMM')\r\n                    return '' + longMonthName + ' ' + year;\r\n                else if (format == 'yyyy')\r\n                    return '' + year;\r\n                else if (format == 'ww')\r\n                    return '' + startWeek.getUTCDate() + ' - ' + endWeek.getUTCDate() + ' ' + monthName + ' ' + year;\r\n\r\n                return '' + day + ' ' + monthName + ' ' + year\r\n            }\r\n\r\n            function formatLongDate(value) {\r\n                return formatDate(value, 'd MMMM yyyy');\r\n            }\r\n\r\n            function formatShortDateWithYear(value) {\r\n                return formatDate(value, 'd MMM yyyy', true);\r\n            }\r\n\r\n            function formatLongDateWithYear(value) {\r\n                return formatDate(value, 'd MMMM yyyy', true);\r\n            }\r\n\r\n            function formatShortDate(value) {\r\n                return formatDate(value, 'd MMM yyyy');\r\n            }\r\n\r\n            function formatLongMonth(value) {\r\n                return formatDate(value, 'MMMM');\r\n            }\r\n\r\n            function formatYear(value) {\r\n                return formatDate(value, 'yyyy');\r\n            }\r\n\r\n            function formatShortWeek(value) {\r\n                return formatDate(value, 'ww');\r\n            }\r\n\r\n            function formatShortDayAndMonth(value) {\r\n                return formatDate(value, 'd MMM');\r\n            }\r\n\r\n            function formatLongDayAndMonth(value) {\r\n                if ($rootScope.$language == 'ru')\r\n                    return formatDate(value, 'd MMMM');\r\n                else\r\n                    return formatDate(value, 'MMMM d');\r\n            }\r\n\r\n            function formatDateRange(value1, value2) {\r\n                value1 =  value1 ? (_.isDate(value1) ? value1 : new Date(value1)) : null;\r\n                value2 =  value2 ? (_.isDate(value2) ? value2 : new Date(value2)) : null;\r\n\r\n                if (value1 == null) {\r\n                    if ($rootScope.$language == 'ru')\r\n                        return formatDate(value2, 'd MMM yyyy', true);\r\n                    else\r\n                        return formatDate(value2, 'MMM d, yyyy', true);\r\n                }\r\n\r\n                if (value2 == null || value1 == value2) {\r\n                    if ($rootScope.$language == 'ru')\r\n                        return formatDate(value1, 'd MMM yyyy', true);\r\n                    else\r\n                        return formatDate(value1, 'MMM d, yyyy', true);\r\n                }\r\n\r\n                if (value1.getUTCFullYear() !== value2.getUTCFullYear()) {\r\n                    if ($rootScope.$language == 'ru')\r\n                        return formatDate(value1, 'd MMM yyyy', true) + '-' + formatDate(value2, 'd MMM yyyy', true);\r\n                    else\r\n                        return formatDate(value1, 'MMM d, yyyy', true) + '-' + formatDate(value2, 'MMM d, yyyy', true);\r\n                } else {\r\n                        return formatDate(value1, 'd MMM') + ' - ' + formatDate(value2, 'd MMM')\r\n                            + ((new Date().getUTCFullYear() !== value1.getUTCFullYear()) ? ' ' + formatDate(value1, 'yyyy') : '');\r\n                }\r\n            }\r\n\r\n            function formatDateTimeRange(value1, value2) {\r\n                value1 =  value1 ? (_.isDate(value1) ? value1 : new Date(value1)) : null;\r\n                value2 =  value2 ? (_.isDate(value2) ? value2 : new Date(value2)) : null;\r\n                if (value1 == null && value2 == null) return '';\r\n\r\n                if (value1 == null) {\r\n                    return formatShortDateTime(value2);\r\n                }\r\n\r\n                if (value2 == null || value1 == value2) {\r\n                    return formatShortDateTime(value1);\r\n                }\r\n\r\n                var dayStart, monthStart, yearStart,\r\n                    dayEnd, monthEnd, yearEnd;\r\n\r\n                dayStart = value1.getUTCDate();\r\n                monthStart = value1.getUTCMonth();\r\n                yearStart = value1.getUTCFullYear();\r\n                dayEnd = value2.getUTCDate();\r\n                monthEnd = value2.getUTCMonth();\r\n                yearEnd = value2.getUTCFullYear();\r\n\r\n\r\n                if (yearStart !== yearEnd) {\r\n                    return formatDate(value1, 'd MMM') + ', ' + yearStart + ' ' + formatTime(value1, 'hh:mm') +\r\n                        ' - ' + formatDate(value2, 'd MMM') + ', ' + yearEnd + ' ' + formatTime(value2, 'hh:mm');\r\n                } else {\r\n                    if (monthStart != monthEnd && !dayStart != dayEnd)\r\n                        return formatDate(value1, 'd MMM') + ', ' + formatTime(value1, 'hh:mm') +\r\n                            ' - ' + formatDate(value2, 'd MMM') + ', ' + formatTime(value2, 'hh:mm');\r\n                    else\r\n                        return formatTime(value1, 'hh:mm') + ' - ' + formatTime(value2, 'hh:mm')\r\n                }\r\n            }\r\n\r\n            function formatTime(value, format) {\r\n                if (value == null) return '';\r\n\r\n                value = _.isDate(value) ? value : new Date(value);\r\n                \r\n                var \r\n                    hours = value.getHours(),\r\n                    mins = value.getMinutes(),\r\n                    secs = value.getSeconds(),\r\n                    ampm = '';\r\n\r\n                if (pipTranslate.use() == 'en') {\r\n                    ampm = hours >= 12 ? ' PM' : ' AM';\r\n                    hours = hours % 12;\r\n                    if (hours == 0) hours = 12;\r\n                }\r\n\r\n                if (format == 'hh:mm:ss')\r\n                    return '' + twoDigits(hours) + ':' + twoDigits(mins) + ':' + twoDigits(secs) + ampm;\r\n                else if (format == 'hh:mm')\r\n                    return '' + twoDigits(hours) + ':' + twoDigits(mins) + ampm;\r\n\r\n                return '' + twoDigits(hours) + ':' + twoDigits(mins) + ':' + twoDigits(secs) + ampm;\r\n            }\r\n\r\n            function formatMonth(value, short) {\r\n                if (value == null) return '';\r\n                return short ? pipTranslate.translate('MONTH_SHORT_' + value) : pipTranslate.translate('MONTH_' + value);\r\n            }\r\n\r\n            function formatLongTime(value) {\r\n                return formatTime(value, 'hh:mm:ss');\r\n            }\r\n\r\n            function formatShortTime(value) {\r\n                return formatTime(value, 'hh:mm');\r\n            }\r\n\r\n            function formatLongDateTime(value) {\r\n                if (value == null) return '';\r\n                value = _.isDate(value) ? value : new Date(value);\r\n                return formatLongDate(value) + ' ' + formatLongTime(value);\r\n            }\r\n\r\n            function formatShortDateTime(value) {\r\n                if (value == null) return '';\r\n                value = _.isDate(value) ? value : new Date(value);\r\n                return formatShortDate(value) + ' ' + formatShortTime(value);\r\n            }\r\n\r\n            function formatElapsedTime(value, format) {\r\n                if (value == null) return '';\r\n\r\n                value = _.isDate(value) ? value : new Date(value);\r\n\r\n                var \r\n                    current = new Date(),\r\n                    diff = Math.floor(((current.getTime() + current.getTimezoneOffset()) - (value.getTime() + value.getTimezoneOffset())) / 1000);\r\n\r\n                if (diff < 1) return pipTranslate.translate('ELAPSED_JUST_NOW');\r\n\r\n                var years, months, weeks, days, hours, mins, secs;\r\n\r\n                secs = diff % 60;\r\n\r\n                diff = Math.floor(diff / 60);\r\n                mins = diff % 60;\r\n\r\n                diff = Math.floor(diff / 60);\r\n                hours = diff % 24;\r\n\r\n                diff = diff / 24;\r\n                years = Math.floor(diff / 365),\r\n\r\n                diff = diff - years * 365;\r\n                months = Math.floor(diff / 30),\r\n                days = Math.floor(diff - months * 30);\r\n\r\n                if (days % 7 == 0) {\r\n                    weeks = Math.floor(days / 7);\r\n                    days = 0;\r\n                } else {\r\n                    weeks = 0;\r\n                }\r\n\r\n                if (format == 'interval') {\r\n                    var result = '';\r\n\r\n                    if (years) {\r\n                        result += ' ' + years + pipTranslate.translate('ELAPSED_YEARS');\r\n                        weeks = days = hours = mins = secs = null;\r\n                    }\r\n                    if (months) {\r\n                        result += ' ' + months + pipTranslate.translate('ELAPSED_MONTHS');\r\n                        days = hours = mins = secs = null;\r\n                    }\r\n                    if (weeks) {\r\n                        result += ' ' + weeks + pipTranslate.translate('ELAPSED_WEEKS');\r\n                        hours = mins = secs = null;\r\n                    }\r\n                    if (days) {\r\n                        result += ' ' + days + pipTranslate.translate('ELAPSED_DAYS');\r\n                        mins = secs = null;\r\n                    }\r\n                    if (hours) {\r\n                        result += ' ' + hours + pipTranslate.translate('ELAPSED_HOURS');\r\n                        secs = null;\r\n                    }\r\n                    if (mins) result += ' ' + mins + pipTranslate.translate('ELAPSED_MINUTES');\r\n                    if (secs) result += ' ' + secs + pipTranslate.translate('ELAPSED_SECONDS');\r\n\r\n                    return result != '' ? result + ' ' + pipTranslate.translate('ELAPSED_AGO') \r\n                        : pipTranslate.translate('ELAPSED_JUST_NOW');\r\n                }\r\n\r\n                // Default time format = 'default'\r\n\r\n                if (years > 0) {\r\n                    return formatDate(value, 'd MMM yyyy');\r\n                }\r\n\r\n                if (months > 0 || weeks > 0 || days > 1) {\r\n                    return formatDate(value, 'MMM d') \r\n                        + ', ' + formatTime(value, 'hh:mm');\r\n                }\r\n\r\n                if (days == 1) {\r\n                    return pipTranslate.translate('ELAPSED_YESTERDAY') \r\n                        + ', ' + formatTime(value, 'hh:mm');\r\n                }\r\n\r\n                if (hours > 10) {\r\n                    return pipTranslate.translate('ELAPSED_TODAY') \r\n                        + ', ' + formatTime(value, 'hh:mm');\r\n                }\r\n\r\n                if (hours > 0) {\r\n                    return '' + hours + ' ' + (hours < 2 ? pipTranslate.translate('ELAPSED_HOUR_AGO') :\r\n                        hours < 5 ? pipTranslate.translate('ELAPSED_HOURS_AGO') : pipTranslate.translate('ELAPSED_HOURS_AGO_MORE_THAN_FIVE'));\r\n                }\r\n\r\n                if (mins > 10) {\r\n                    return '' + mins + ' ' + pipTranslate.translate('ELAPSED_MIN_AGO');\r\n                }\r\n\r\n                if (mins > 0) {\r\n                    return pipTranslate.translate('ELAPSED_FEW_MIN_AGO');\r\n                }\r\n\r\n                return pipTranslate.translate('ELAPSED_JUST_NOW');\r\n            }\r\n\r\n            function formatElapsedInterval(value) {\r\n                return formatElapsedTime(value, 'interval');  \r\n            }\r\n\r\n            function formatMillisecondsToSeconds(value) {\r\n                return Math.floor(value / 1000)\r\n            }\r\n\r\n        }]\r\n    );\r\n    \r\n})();\r\n","/**\r\n * @file Assertion utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAssert', ['pipDebug']);\r\n\r\n    thisModule.provider('pipAssert', ['pipDebugProvider', function (pipDebugProvider) {\r\n\r\n        return {\r\n            isEmpty: pipDebugProvider.enabled() ? isEmpty : noop,\r\n            isObjectId: pipDebugProvider.enabled() ? isObjectId : noop,\r\n            isDefined: pipDebugProvider.enabled() ? isDefined : noop,\r\n            isDef: pipDebugProvider.enabled() ? isDefined : noop,\r\n            contains: pipDebugProvider.enabled() ? contains : noop,\r\n            equal: pipDebugProvider.enabled() ? equal : noop,\r\n            notEqual: pipDebugProvider.enabled() ? notEqual : noop,\r\n            strictEqual: pipDebugProvider.enabled() ? strictEqual : noop,\r\n            notStrictEqual: pipDebugProvider.enabled() ? notStrictEqual : noop,\r\n            isArray: pipDebugProvider.enabled() ? isArray : noop,\r\n            isBoolean: pipDebugProvider.enabled() ? isBoolean : noop,\r\n            isNumber: pipDebugProvider.enabled() ? isNumber : noop,\r\n            isString: pipDebugProvider.enabled() ? isString : noop,\r\n            isObject: pipDebugProvider.enabled() ? isObject : noop,\r\n            isDate: pipDebugProvider.enabled() ? isDate : noop,\r\n            isError: pipDebugProvider.enabled() ? isError : noop,\r\n            isFunction: pipDebugProvider.enabled() ? isFunction : noop,\r\n            isNotNull: pipDebugProvider.enabled() ? isNotNull : noop,\r\n            \r\n            $get: ['pipDebug', function(pipDebug) {\r\n                return {\r\n                    isEmpty: pipDebug.enabled() ? isEmpty : noop,\r\n                    isObjectId: pipDebug.enabled() ? isObjectId : noop,\r\n                    isDefined: pipDebug.enabled() ? isDefined : noop,\r\n                    isDef: pipDebug.enabled() ? isDefined : noop,\r\n                    contains: pipDebug.enabled() ? contains : noop,\r\n                    equal: pipDebug.enabled() ? equal :  noop,\r\n                    notEqual: pipDebug.enabled() ? notEqual : noop,\r\n                    strictEqual: pipDebug.enabled() ? strictEqual : noop,\r\n                    notStrictEqual: pipDebug.enabled() ? notStrictEqual :  noop,\r\n                    isArray: pipDebug.enabled() ? isArray : noop,\r\n                    isBoolean: pipDebug.enabled() ? isBoolean : noop,\r\n                    isNumber: pipDebug.enabled() ? isNumber : noop,\r\n                    isString: pipDebug.enabled() ? isString : noop,\r\n                    isObject: pipDebug.enabled() ? isObject : noop,\r\n                    isDate: pipDebug.enabled() ? isDate : noop,\r\n                    isError: pipDebug.enabled() ? isError : noop,\r\n                    isFunction: pipDebug.enabled() ? isFunction : noop,\r\n                    isNotNull: pipDebug.enabled() ? isNotNull : noop\r\n                }\r\n            }]\r\n        };\r\n\r\n        function noop() {}\r\n\r\n        function objectToString(o) {\r\n            return Object.prototype.toString.call(o);\r\n        }\r\n\r\n        function isArray(arg, message) {\r\n            if (!Array.isArray(arg)) {\r\n                throw new Error(message || arg + ' should be array');\r\n            }\r\n        }\r\n\r\n        function isBoolean(arg, message) {\r\n            if (typeof arg !== 'boolean') {\r\n                throw new Error(message || arg + ' should be boolean');\r\n            }\r\n        }\r\n\r\n        function isNotNull(arg, message) {\r\n            if (arg === null) {\r\n                throw new Error(message || arg + ' should be not null');\r\n            }\r\n        }\r\n\r\n        function isNumber(arg, message) {\r\n            if (typeof arg !== 'number') {\r\n                throw new Error(message || arg + ' should be number');\r\n            }\r\n        }\r\n\r\n        function isString(arg, message) {\r\n            if (typeof arg !== 'string') {\r\n                throw new Error(message || arg + ' should be string');\r\n            }\r\n        }\r\n\r\n        function isObject(arg, message) {\r\n            if (typeof arg !== 'object') {\r\n                throw new Error(message || arg + ' should be an object');\r\n            }\r\n        }\r\n\r\n        function isDate(d, message) {\r\n            if (typeof d === 'object' && objectToString(d) !== '[object Date]') {\r\n                throw new Error(message || d + ' should be a date');\r\n            }\r\n        }\r\n\r\n        function isError(e, message) {\r\n            if (typeof e === 'object' && (objectToString(e) !== '[object Error]' || e instanceof Error)) {\r\n                throw new Error(message || e + ' should be an error');\r\n            }\r\n        }\r\n\r\n        function isFunction(arg, message) {\r\n            if (typeof arg !== 'function') {\r\n                throw new Error(message || arg + ' should be a function');\r\n            }\r\n        }\r\n\r\n        function isDefined(arg, message) {\r\n           if (typeof arg === \"undefined\") {\r\n               throw new Error(message || arg + ' should be defined');\r\n           }\r\n        }\r\n\r\n        function isEmpty(arg, message) {\r\n            if (arg === null || arg === undefined || arg === false) {\r\n                throw new Error(message || arg + ' should be not null or undefined or false');\r\n            }\r\n        }\r\n\r\n        function contains(obj, prop, message) {\r\n            if (typeof obj !== 'object') {\r\n                throw new Error(obj + ' should be an object');\r\n            }\r\n            if (obj[prop] === null || obj[prop] === undefined) {\r\n                throw new Error(message || prop + ' should be in object ' + obj);\r\n            }\r\n        }\r\n\r\n        // Compares args with ==\r\n        function equal(actual, expected, message) {\r\n            if (actual != expected) {\r\n                throw new Error(message || actual + ' should be not equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !=\r\n        function notEqual(actual, expected, message) {\r\n            if (actual == expected) {\r\n                throw new Error(message || actual + ' should be equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with ===\r\n        function strictEqual(actual, expected, message) {\r\n            if (actual !== expected) {\r\n                throw new Error(message || actual + ' should not be strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !==\r\n        function notStrictEqual(actual, expected, message) {\r\n            if (actual === expected) {\r\n                throw new Error(message || actual + ' should not strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Checks if value is a valid ObjectId\r\n        function isObjectId(value, message) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            if (!checkForHexRegExp.test(value)) {\r\n                throw new Error(message || value + ' should be an object id');\r\n            }\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Debugging service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDebug', []);\r\n\r\n    thisModule.provider('pipDebug', ['$logProvider', function ($logProvider) {\r\n\r\n        this.enabled = true;\r\n\r\n        return {\r\n            enable: enable,\r\n            disable: disable,\r\n            enabled: enabled,\r\n            \r\n            $get: ['$log', function($log) {\r\n                return {\r\n                    enabled: enabled,\r\n                    log: $log.log,\r\n                    info: $log.info,\r\n                    warn: $log.warn,\r\n                    error: $log.error,\r\n                    debug: $log.debug\r\n                }\r\n            }]\r\n        };\r\n\r\n        function enabled() {\r\n            return this.enabled;\r\n        }\r\n\r\n        function enable() {\r\n            this.enabled = true;\r\n            $logProvider.debugEnabled(true);\r\n        }\r\n\r\n        function disable() {\r\n            this.enabled = false;\r\n            $logProvider.debugEnabled(false);\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Error context\r\n * @description\r\n * Error context decouples business components that throw errors\r\n * and visualization components that show them to users\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors', ['pipUtils', 'pipAssert']);\r\n\r\n    /*\r\n     * Error is designed to assist with error handling\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * */\r\n    thisModule.factory('pipError',\r\n        ['$rootScope', 'pipAssert', function ($rootScope, pipAssert) {\r\n\r\n            // Initialize error scope\r\n            $rootScope.errors = {};\r\n\r\n            return createError;\r\n\r\n            //----------------------------\r\n\r\n            function initError(scope) {\r\n                $rootScope.errors[scope] = {\r\n                    message: undefined,\r\n                    code: undefined,\r\n                    details: undefined\r\n                };\r\n            };\r\n\r\n            function errorMessage(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                // Process regular messages\r\n                if (error.message) {\r\n                    return error.message;\r\n                }\r\n\r\n                // Process server application errors\r\n                if (error.data) {\r\n                    if (error.data.code) {\r\n                        // process server error codes here\r\n                        return 'ERROR_' + error.data.code;\r\n                    }\r\n\r\n                    if (error.data.message) {\r\n                        return error.data.message;\r\n                    }\r\n                }\r\n\r\n                // Process standard HTTP errors\r\n                if (error.statusText) {\r\n                    return error.statusText;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return 'ERROR_' + error.status;\r\n                }\r\n                \r\n                return error.data ? error.data : error;\r\n            };\r\n\r\n            function errorCode(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                if (error.data && error.data.code) {\r\n                    return error.data.code;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return error.status;\r\n                }\r\n                \r\n                return null;\r\n            };\r\n\r\n            function errorDetails(error) {\r\n                return error && error.data ? error.data : error;\r\n            };\r\n\r\n            function createError(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = {\r\n                    reset: function () {\r\n                        initError(scope);\r\n                    },\r\n\r\n                    empty: function() {\r\n                        var error = $rootScope.errors[scope];\r\n                        return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                    },\r\n\r\n                    get: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope];\r\n                        }\r\n                        return '';\r\n                    },\r\n\r\n                    message: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].message;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    code: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].code;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    details: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].details;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    set: function (error) {\r\n                        if (error) {\r\n                            pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                            $rootScope.errors[scope] = {\r\n                                message: errorMessage(error),\r\n                                code: errorCode(error),\r\n                                details: errorDetails(error)\r\n                            };\r\n                            console.error($rootScope.errors[scope]);\r\n                        } else {\r\n                            initError(scope);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // Assign error into scope\r\n                if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n                return error;\r\n            };\r\n        }]\r\n    );\r\n    \r\n})();","/**\r\n * @file Application router extended from ui.router\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n    \r\n    var thisModule = angular.module('pipState', ['ui.router', 'pipTranslate', 'pipAssert']);\r\n\r\n    thisModule.config(\r\n        ['$locationProvider', '$httpProvider', 'pipTranslateProvider', function($locationProvider, $httpProvider, pipTranslateProvider) {\r\n            // Switch to HTML5 routing mode\r\n            //$locationProvider.html5Mode(true);\r\n            pipTranslateProvider.translations('en', {\r\n                'ERROR_SWITCHING': 'Error while switching route. Try again.'\r\n            });\r\n\r\n            pipTranslateProvider.translations('ru', {\r\n                'ERROR_SWITCHING': 'Ошибка при переходе. Попробуйте ещё раз.'\r\n            });\r\n        }]\r\n    );\r\n\r\n    thisModule.run(\r\n        ['$rootScope', 'pipTranslate', '$state', function($rootScope, pipTranslate, $state) {\r\n            $rootScope.$on('$stateChangeSuccess',\r\n                function(event, toState, toParams, fromState, fromParams) {\r\n                    if ($rootScope.$user && $rootScope.$user.id && toState.params && toState.params.access) {\r\n                        if (toParams && toParams.party_id) {\r\n                            var party = _.find($rootScope.$user.party_access, {party_id: toParams.party_id});\r\n                            if (party) {\r\n                                if (toState.params.access == 'manager' && !party.manager ||\r\n                                    toState.params.access == 'contributor' && !party.contributor) {\r\n                                    if (toState.params.toState) {\r\n                                        event.preventDefault();\r\n                                        $state.go(toState.params.toState, toParams);\r\n                                        return;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (toParams.party_id != $rootScope.$user.id && toState.params.toState) {\r\n                                    event.preventDefault();\r\n                                    $state.go(toState.params.toState, toParams);\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n                    // Record current and previous state\r\n                    $rootScope.$state = {name: toState.name, url: toState.url, params: toParams};\r\n                    $rootScope.$prevState = {name: fromState.name, url: fromState.url, params: fromParams};\r\n                }\r\n            );\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateChangeError',\r\n                function(event, toState, toParams, fromState, fromParams, error) {\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n\r\n                    console.error('Error while switching route to ' + toState.name);\r\n                    console.error(error);\r\n                }\r\n            );\r\n\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateNotFound',\r\n                function(event, unfoundState, fromState, fromParams) {\r\n                    event.preventDefault();\r\n\r\n                    // todo make configured error state name\r\n                    $state.go('errors_missing_route',  {\r\n                            unfoundState: unfoundState,\r\n                            fromState : {\r\n                                to: fromState ? fromState.name : '',\r\n                                fromParams: fromParams\r\n                            }\r\n                        }\r\n                    );\r\n                    $rootScope.$routing = false;\r\n                }\r\n            );\r\n\r\n        }]\r\n    );\r\n\r\n    thisModule.provider('pipState', ['$stateProvider', 'pipAssertProvider', function($stateProvider, pipAssertProvider) {\r\n        // Configuration of redirected states\r\n        var redirectedStates = {};\r\n\r\n        this.redirect = setRedirect;\r\n        this.state = $stateProvider.state;\r\n\r\n        this.$get = ['$state', '$timeout', 'pipAssert', function ($state, $timeout, pipAssert) {\r\n            $state.redirect = redirect;\r\n            \r\n            return $state;\r\n            \r\n\t\t\t//------------------------\r\n            function redirect(event, state, params, $rootScope) {\r\n                pipAssert.contains(state, 'name', \"$state.redirect: state should contains name prop\");\r\n                pipAssert.isObject(params, \"$state.redirect: params should be an object\");\r\n\r\n                var toState;\r\n\r\n                $rootScope.$routing = true;\r\n                toState = redirectedStates[state.name];\r\n                if (_.isFunction(toState)) {\r\n                    toState = toState(state.name, params, $rootScope);\r\n\r\n                    if (_.isNull(toState)) {\r\n                        $rootScope.$routing = false;\r\n                        throw new Error('Redirected toState cannot be null');\r\n                    }\r\n                }\r\n\r\n                if (!!toState) {\r\n                    $timeout(function() {\r\n                        event.preventDefault();\r\n                        $state.transitionTo(toState, params, {location: 'replace'});\r\n                    });\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }];\r\n\r\n        return;        \r\n        //------------------\r\n\r\n        // Specify automatic redirect from one state to another\r\n        function setRedirect(fromState, toState) {\r\n            pipAssertProvider.isNotNull(fromState, \"pipState.redirect: fromState cannot be null\");\r\n            pipAssertProvider.isNotNull(toState, \"pipState.redirect: toState cannot be null\");\r\n            \r\n            redirectedStates[fromState] = toState;  \r\n\r\n            return this;\r\n        };\r\n\r\n    }]);\r\n\r\n})();","\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    config.$inject = ['$mdThemingProvider', 'pipTranslateProvider'];\r\n    run.$inject = ['localStorageService', 'pipTheme', '$rootScope'];\r\n    ThemeFactory.$inject = ['localStorageService', '$mdTheming', '$rootScope', '$timeout', '$state', '$stateParams'];\r\n    angular\r\n        .module('pipTheme', ['ngMaterial'])\r\n        .config(config)\r\n        .run(run)\r\n        .factory('pipTheme', ThemeFactory);\r\n\r\n    function config($mdThemingProvider, pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            THEME: 'Theme',\r\n            blue: 'Blue',\r\n            pink: 'Pink',\r\n            amber: 'Amber',\r\n            orange: 'Orange',\r\n            green: 'Green',\r\n            navy: 'Navy',\r\n            grey: 'Grey'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            THEME: 'Тема',\r\n            blue: 'Голубая',\r\n            pink: 'Розовая',\r\n            amber: 'Янтарная',\r\n            orange: 'Оранжевая',\r\n            green: 'Зеленая',\r\n            navy: 'Сине-серая',\r\n            grey: 'Серая'\r\n        });\r\n\r\n\r\n        registerBlueTheme('default');\r\n        registerBlueTheme('blue');\r\n        registerPinkTheme('pink');\r\n        registerAmberTheme('amber');\r\n        registerOrangeTheme('orange');\r\n        registerGreenTheme('green');\r\n        registerNavyTheme('navy');\r\n        registerGreyTheme('grey');\r\n       // registerDarkTheme('dark');\r\n       // registerBlackTheme('black');\r\n\r\n        $mdThemingProvider.setDefaultTheme('default');\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n        function registerBlueTheme(themeName) {\r\n            var bluePrimaryPalette = $mdThemingProvider.extendPalette('blue', {\r\n                'contrastDefaultColor': 'light',\r\n                'contrastDarkColors': undefined\r\n            });\r\n            $mdThemingProvider.definePalette('blue-primary', bluePrimaryPalette);\r\n\r\n            var blueBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(33, 150, 243, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('blue-background', blueBackgroundPalette);\r\n\r\n            var blueAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n                '600': 'rgba(0, 200, 83, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('blue-accent', blueAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('blue-primary', {\r\n                    'default': '500',\r\n                    'hue-1': '300'\r\n                })\r\n                .backgroundPalette('blue-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('blue-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n\r\n        function registerPinkTheme(themeName) {\r\n            var PinkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(188, 86, 121, 1)',\r\n                'contrastDefaultColor': 'dark',\r\n                'contrastLightColors': ['A200', 'A700']\r\n            });\r\n            $mdThemingProvider.definePalette('pink-background', PinkBackgroundPalette);\r\n\r\n            var PinkPrimaryPalette = $mdThemingProvider.extendPalette('pink', {\r\n                '600': 'rgba(255, 128, 171, 1)',\r\n                '700': 'rgba(188, 86, 121, .54)',\r\n                '900': 'rgba(188, 86, 121, 1)',\r\n                'contrastDefaultColor': 'light'\r\n            });\r\n            $mdThemingProvider.definePalette('pink-primary', PinkPrimaryPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('pink-primary', {\r\n                    'default': '900',\r\n                    'hue-1': '700'\r\n                })\r\n                .backgroundPalette('pink-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('pink-primary', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n\r\n\r\n        function registerAmberTheme(themeName) {\r\n            var orangeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(255, 152, 0, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('orange-background', orangeBackgroundPalette);\r\n\r\n            var orangePrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n                '800': 'rgba(255, 152, 0, 1)',\r\n                '900': 'rgba(255, 152, 0, .54);'\r\n            });\r\n            $mdThemingProvider.definePalette('orange-primary', orangePrimaryPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('orange-primary', {\r\n                    'default': '800',\r\n                    'hue-1': '900'\r\n                })\r\n                .backgroundPalette('orange-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('orange', {\r\n                    'default': '900'\r\n                });\r\n        }\r\n\r\n        function registerOrangeTheme(themeName) {\r\n            var RedBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(255, 112, 67, 1)',\r\n                'contrastLightColors': ['600', '700', '800', '900', 'A200']\r\n            });\r\n            $mdThemingProvider.definePalette('red-background', RedBackgroundPalette);\r\n\r\n            var RedPrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n                '800': 'rgba(255, 112, 67, 1)',\r\n                '900': 'rgba(255, 152, 67, .54)',\r\n                'A100': 'rgba(255, 171, 64, 1)',\r\n                'contrastLightColors': ['800', '900', 'A100']\r\n            });\r\n            $mdThemingProvider.definePalette('red-primary', RedPrimaryPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('red-primary', {\r\n                    'default': '800',\r\n                    'hue-1': '900'\r\n                })\r\n                .backgroundPalette('red-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('red-primary', {\r\n                    'default': 'A100'\r\n                });\r\n        }\r\n\r\n        function registerGreenTheme(themeName) {\r\n            var greenBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(76, 175, 80, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('green-background', greenBackgroundPalette);\r\n\r\n            var greenPrimaryPalette = $mdThemingProvider.extendPalette('green', {\r\n                '300':'#9ed4a1',\r\n                'contrastLightColors': ['500', '300']\r\n            });\r\n            $mdThemingProvider.definePalette('green-primary', greenPrimaryPalette);\r\n\r\n\r\n            var greenAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n                'contrastLightColors': ['A700']\r\n            });\r\n            $mdThemingProvider.definePalette('green-accent', greenAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('green-primary', {\r\n                    'default': '500',\r\n                    'hue-1': '300'\r\n                })\r\n                .backgroundPalette('green-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('green-accent', {\r\n                    'default': 'A700'\r\n                });\r\n        }\r\n\r\n        function registerNavyTheme(themeName) {\r\n            var greyPalette = $mdThemingProvider.extendPalette('grey', {\r\n                '700': 'rgba(86, 97, 125, 1)',\r\n                '800': 'rgba(86, 97, 125, .54)',\r\n                'A100': 'rgba(231, 231, 231, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('grey', greyPalette);\r\n\r\n            var tealPalette = $mdThemingProvider.extendPalette('teal', {\r\n                'contrastLightColors': [ '500', '600', '700', '800', '900', 'A700']\r\n            });\r\n            $mdThemingProvider.definePalette('teal', tealPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('grey', {\r\n                    'default': '700',\r\n                    'hue-1': '800'\r\n                })\r\n                .backgroundPalette('grey', {\r\n                    'default': '50',  // background\r\n                    'hue-1': '700',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('teal', {\r\n                    'default': 'A700'\r\n                });\r\n        }\r\n\r\n        function registerGreyTheme(themeName) {\r\n            var thirdPartyPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(231, 231, 231, 1)',\r\n                'A200': 'rgba(255, 152, 0, 1)',\r\n                'A400': '#a9b9c0',\r\n                '500': '#607D8B',\r\n                'A700': '#90A4AE',\r\n                //'800': '',\r\n                'contrastDefaultColor': 'dark',\r\n                'contrastLightColors': [ '300', '400', '500', '600', '700', '800', '900', 'A700']\r\n            });\r\n            $mdThemingProvider.definePalette('third-party', thirdPartyPalette);\r\n\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('third-party', {\r\n                    'default': '500',\r\n                    'hue-1': 'A400'\r\n                })\r\n                .backgroundPalette('third-party', {\r\n                    'default': '50',  // background\r\n                    'hue-1': '500',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('third-party', {\r\n                    'default': 'A700'\r\n                });\r\n        }\r\n\r\n        function registerDarkTheme(themeName) {\r\n            var darkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                '600': 'rgba(48, 48, 48, 1)',\r\n                '700': 'rgba(255, 255, 255, 0.54)',\r\n                '800': 'rgba(66, 66, 66, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('dark-background', darkBackgroundPalette);\r\n\r\n            var darkAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n                '600': 'rgba(0, 200, 83, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('dark-accent', darkAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('dark-background', {\r\n                    'default': '900',\r\n                    'hue-1': '700'\r\n                })\r\n                .backgroundPalette('dark-background', {\r\n                    'default': '800',  // background\r\n                    'hue-1': '900',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('dark-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n\r\n        function registerBlackTheme(themeName) {\r\n            var blackBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                '600': 'rgba(48, 48, 48, 1)',\r\n                '700': 'rgba(255, 255, 255, 0.54)',\r\n                '800': 'rgba(66, 66, 66, 1)',\r\n                '500': 'rgba(38, 50, 56, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('black-background', blackBackgroundPalette);\r\n\r\n            var blackAccentPalette = $mdThemingProvider.extendPalette('blue-grey', {\r\n                '700': 'rgba(255, 255, 255, 0.54)'\r\n            });\r\n            $mdThemingProvider.definePalette('black-accent', blackAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('black-accent', {\r\n                    'default': '900',\r\n                    'hue-1': '700'\r\n                })\r\n                .backgroundPalette('black-background', {\r\n                    'default': '800',  // background\r\n                    'hue-1': '500',  // tiles dialog\r\n                    'hue-2': '800'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('black-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function run(localStorageService, pipTheme, $rootScope) {\r\n        try {\r\n            var currentTheme = ($rootScope.$user && $rootScope.$user.theme) ?\r\n                $rootScope.$user.theme : localStorageService.get('theme');\r\n\r\n            pipTheme.initializeTheme(currentTheme);\r\n        } catch (ex) {\r\n            pipTheme.initializeTheme('blue');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name pipTheme\r\n     */\r\n    function ThemeFactory(localStorageService, $mdTheming, $rootScope, $timeout, $state, $stateParams) {\r\n        return {\r\n            /**\r\n             * Set current theme\r\n             * @param {String} theme - theme name\r\n             * @param {String}\r\n             * @throws {Error} 'Theme is not specified' in case if theme is not defined\r\n             * @throws {Error} 'Theme XXX is not registered. Please, register it first with $mdThemingProvider' if theme is not registered\r\n             */\r\n            setCurrentTheme: function (theme) {\r\n                if (theme == null || theme === '') {\r\n                    throw new Error('Theme is not specified');\r\n                }\r\n\r\n                if (localStorageService.get('theme') == theme && $rootScope.$theme == theme) {\r\n                    return;\r\n                }\r\n\r\n                if (!(theme in $mdTheming.THEMES)) {\r\n                    throw new Error('Theme ' + theme + ' is not registered. Please, register it first with $mdThemingProvider');\r\n                }\r\n                localStorageService.set('theme', theme);\r\n                $rootScope.$theme = theme;\r\n            },\r\n\r\n            /** Add attribute 'md-theme' with value current theme\r\n             *  Add current theme class\r\n             */\r\n            initializeTheme: function (theme) {\r\n                if (theme == null || theme === '') {\r\n                    throw new Error('Theme is not specified');\r\n                }\r\n\r\n                if (!(theme in $mdTheming.THEMES)) {\r\n                    throw new Error('Theme ' + theme + ' is not registered. Please, register it first with $mdThemingProvider');\r\n                }\r\n\r\n                $rootScope.$theme = theme;\r\n                $('body').attr('md-theme', '{{ $theme }}').addClass('{{ $theme }}');\r\n            }\r\n        };\r\n    }\r\n})();\r\n","/**\r\n * @file Global application timer service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimer', []);\r\n\r\n    thisModule.service('pipTimer', \r\n        ['$interval', '$rootScope', function ($interval, $rootScope) {\r\n            var \r\n                AUTO_PULL_CHANGES_TIMEOUT = 60000, // 1 min\r\n                AUTO_UPDATE_PAGE_TIMEOUT = 15000,  // 15 sec\r\n                AUTO_UPDATE_COLLECTION_TIMEOUT = 300000, // 5 min\r\n                started = false, \r\n                autoPullChangesInterval, \r\n                autoUpdatePageInterval,\r\n                autoUpdateCollectionInterval;\r\n\r\n            return {\r\n                isStarted: isStarted,\r\n                start: start,\r\n                stop: stop\r\n            };\r\n\r\n            //------------------------\r\n\r\n            function isStarted() {\r\n                return started;\r\n            };\r\n\r\n            function start() {\r\n                if (started) return;\r\n\r\n                autoPullChangesInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoPullChanges');\r\n                }, AUTO_PULL_CHANGES_TIMEOUT);\r\n\r\n                autoUpdatePageInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdatePage');\r\n                }, AUTO_UPDATE_PAGE_TIMEOUT);\r\n\r\n                autoUpdateCollectionInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdateCollection');\r\n                }, AUTO_UPDATE_COLLECTION_TIMEOUT);\r\n\r\n                started = true;\r\n            };\r\n\r\n            function stop() {\r\n                if (autoPullChangesInterval)\r\n                    $interval.cancel(autoPullChangesInterval);\r\n\r\n                if (autoUpdatePageInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                if (autoUpdateCollectionInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                started = false;\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Transaction context\r\n * @description\r\n * Transaction context helps to wrap multiple server requests\r\n * into one logical transaction. It decouples transaction\r\n * management and progress visualization to the user\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTransactions', ['pipTranslate', 'pipErrors']);\r\n\r\n\tthisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        \r\n        pipTranslateProvider.translations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'ENTERING': 'Вход в систему...',\r\n            'PROCESSING': 'Обрабатывается...',\r\n            'LOADING': 'Загружается...',\r\n            'SAVING': 'Сохраняется...'\r\n        });\r\n\t\t\r\n\t}]);\r\n\r\n    /*\r\n     * Transaction is designed to assist with transaction processing\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * \r\n     * Transaction is also integrated with Error service. So you don't need to double it\r\n     * */\r\n    thisModule.factory('pipTransaction',\r\n        ['$rootScope', 'pipError', function ($rootScope, pipError) {\r\n\r\n            // Initialize transaction scope\r\n            $rootScope.transactions = {};\r\n\r\n            return createTransaction;\r\n\r\n            //---------------------------------\r\n\r\n            function initTransaction(scope) {\r\n                $rootScope.transactions[scope] = {\r\n                    id: undefined,\r\n                    operation: undefined\r\n                };\r\n            }\r\n            \r\n            function createTransaction(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = pipError(scope);\r\n                var transaction = {\r\n                    error: error,\r\n\r\n                    reset: function () {\r\n                        initTransaction();\r\n                        error.reset();\r\n                    },\r\n\r\n                    busy: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction != null && transaction.id;\r\n                    },\r\n\r\n                    failed: function() {\r\n                        return !error.empty();\r\n                    },\r\n\r\n                    aborted: function(id) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return _.isNull(transaction) || transaction.id != id;\r\n                    },\r\n\r\n                    get: function () {\r\n                        if (_.isNull($rootScope.transactions[scope])) {\r\n                            initTransaction(scope);\r\n                        }\r\n                        return $rootScope.transactions[scope];\r\n                    },\r\n\r\n                    id: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.id : null;\r\n                    },\r\n\r\n                    operation: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.operation : null;\r\n                    },\r\n\r\n                    errorMessage: function () {\r\n                        return error.message();\r\n                    },\r\n\r\n                    begin: function (operation) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        // Transaction already in progress\r\n                        if (transaction != null && transaction.id) {\r\n                            return null;\r\n                        }                      \r\n\r\n                        transaction = $rootScope.transactions[scope] = {\r\n                            id: new Date().getTime(),\r\n                            operation: operation || 'PROCESSING'\r\n                        };\r\n                        error.reset();\r\n\r\n                        return transaction.id;\r\n                    },\r\n\r\n                    abort: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction) {\r\n                            transaction.id = null;\r\n                        }\r\n                        error.reset();\r\n                    },\r\n\r\n                    end: function (err) {\r\n                        if (err) error.set(err);\r\n                        else error.reset();\r\n\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction != null) {\r\n                            transaction.id = null;\r\n                        }                      \r\n                    }\r\n                };\r\n\r\n                if (_.isObject(scopeObject)) {\r\n                    scopeObject.error = error;\r\n                    scopeObject.transaction = transaction;\r\n                }\r\n\r\n                return transaction;\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Translatation service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo:\r\n * - Move directives to more appropriate places\r\n */\r\n \r\n /* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate', ['LocalStorageModule', 'pipAssert']);\r\n\r\n    thisModule.provider('pipTranslate', ['pipAssertProvider', function(pipAssertProvider) {\r\n        var \r\n            language = 'en',\r\n            persist = true,\r\n            setRoot = true,\r\n            translationMap = {\r\n                en: {\r\n                    'en': 'English',\r\n                    'ru': 'Russian',\r\n                    'es': 'Spanish',\r\n                    'pt': 'Portuguese',\r\n                    'de': 'German',\r\n                    'fr': 'French'\r\n                },\r\n                ru: {\r\n                    'en': 'Английский',\r\n                    'ru': 'Русский',\r\n                    'es': 'Испанский',\r\n                    'pt': 'Португальский',\r\n                    'de': 'Немецкий',\r\n                    'fr': 'Французский'\r\n                }\r\n            };\r\n\r\n        this.translations = setTranslations;\r\n        this.language = initLanguage;\r\n        this.use = initLanguage;\r\n        this.persist = initPersist;\r\n        this.setRoot = initSetRoot;\r\n\r\n        this.$get = ['$rootScope', '$timeout', 'localStorageService', 'pipAssert', function ($rootScope, $timeout, localStorageService, pipAssert) {\r\n            // Read language from persistent storage\r\n            if (persist)\r\n                language = localStorageService.get('language') || language;\r\n\r\n            // Set root variable\r\n            if (setRoot) \r\n                $rootScope.$language = language;\r\n            \r\n            // Resetting root scope to force update language on the screen\r\n            function reset(fullReset, partialReset) {\r\n                fullReset = fullReset !== undefined ? !!fullReset : true;\r\n                partialReset = partialReset !== undefined ? !!partialReset : true;\r\n\r\n                $rootScope.$reset = fullReset;\r\n                $rootScope.$partialReset = partialReset;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n\r\n            return {\r\n                use: function (newLanguage, fullReset, partialReset) {\r\n                    pipAssert.isString(newLanguage || '', \"pipTranslate.use: argument should be a string\");\r\n                    if (newLanguage != null && newLanguage != language) {\r\n                        language = newLanguage;\r\n                        if (persist)\r\n                            localStorageService.set('language', language);\r\n                        if (setRoot)\r\n                            $rootScope.$language = language;\r\n                        reset(fullReset, partialReset);\r\n                    }\r\n                    return language;\r\n                },\r\n\r\n                translations: setTranslations,\r\n                translate: translate,\r\n                translateArray: translateArray,\r\n                translateSet: translateSet,\r\n                translateObjects: translateObjects,\r\n                translateById: translateById,\r\n                translateSetById: translateSetById,\r\n                translateStringsSet: translateStringsSet\r\n            }\r\n        }];\r\n\r\n        // Initialize language selection\r\n        function initLanguage(newLanguage) {\r\n            pipAssertProvider.isString(newLanguage || '', \"pipTranslateProvider.use or pipTranslateProvider.language: argument should be a string\");\r\n\r\n            if (newLanguage != null) {\r\n                language = newLanguage;\r\n            }\r\n            return language;\r\n        }\r\n\r\n        // Initialize persistence flag\r\n        function initPersist(newPersist) {\r\n            if (newPersist != null) {\r\n                pipAssertProvider.isBoolean(newPersist || '', \"pipTranslateProvider.persist: argument should be a boolean\");\r\n                persist = newPersist;\r\n            }\r\n            return persist;\r\n        }\r\n\r\n        // Initialize set root flag\r\n        function initSetRoot(newSetRoot) {\r\n            if (newSetRoot != null) {\r\n                pipAssertProvider.isBoolean(newSetRoot || '', \"pipTranslateProvider.setRoot: argument should be a boolean\");\r\n                setRoot = newSetRoot;\r\n            }\r\n            return setRoot;  \r\n        }\r\n\r\n        // Set translation strings for specific language\r\n        function setTranslations(language, languageMap) {\r\n            pipAssertProvider.isString(language, \"pipTranslate.setTranslations or pipTranslateProvider.translations: first argument should be a string\");\r\n            pipAssertProvider.isObject(languageMap, \"pipTranslate.setTranslations or pipTranslateProvider.translations: second argument should be an object\");\r\n\r\n            var map = translationMap[language] || {};\r\n            translationMap[language] = _.extend(map, languageMap);\r\n        }\r\n\r\n        // Translate a string by key using set language\r\n        function translate(key) {\r\n            if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        }\r\n\r\n        // Translate an array of strings\r\n        function translateArray(keys) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateArray: argument should be an array\");\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var key = k || '';\r\n                values.push(map[key] || key);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings into array of objects (set)\r\n        function translateSet(keys, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSet: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSet: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSet: third argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate a collection of objects\r\n        function translateObjects(items, key, value) {\r\n            if (_.isNull(items) || items.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(items, \"pipTranslate.translateObjects: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateObjects: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateObjects: third argument should be a string\");\r\n\r\n            key = key || 'name';\r\n            value = value || 'nameLocal';\r\n\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(items, function (i) {\r\n                var item = i, mapKey = item[key] || '';\r\n\r\n                item[value] = map[mapKey] || mapKey;\r\n            });\r\n\r\n            return items;\r\n        }\r\n\r\n        // Translate a string by key  with prefix using set language todo\r\n        function translateById(prefix, key) {\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateById: second argument should be a string\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateById: first argument should be a string\");\r\n\r\n            prefix = prefix ? prefix + '_' : '';\r\n            key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n            if (key == null) return '';\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        };\r\n\r\n        function translateSetById(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSetById: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateSetById: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSetById: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSetById: forth argument should be a string\");\r\n\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + '_' + mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n        function translateStringsSet(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateStringsSet: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateStringsSet: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateStringsSet: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateStringsSet: forth argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + mapKey.replace(/ /g, '_').toUpperCase()]\r\n                    || (prefix + mapKey.replace(/ /g, '_').toUpperCase());\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n    }]);\r\n\r\n    thisModule.directive('pipTranslate', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslate',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.text(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n    thisModule.directive('pipTranslateHtml', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslateHtml',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.html(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n})();","/**\r\n * @file Filter to format date and time\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDateTimeFilters', ['pipDateFormat']);\r\n\r\n    thisModule.filter('formatDate',  \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value, format) {\r\n                return pipDateFormat.formatDate(value, format);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatLongDate', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatLongDate(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatLongDateWithYear',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatLongDateWithYear(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatMonth',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value, format) {\r\n                return pipDateFormat.formatMonth(value, format);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatShortDate', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatShortDate(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatShortDateWithYear',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatShortDateWithYear(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatLongMonth',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatLongMonth(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatYear',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatYear(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatShortWeek',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatShortWeek(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value, format) {\r\n                return pipDateFormat.formatTime(value, format);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatLongTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatLongTime(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatShortTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatShortTime(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatLongDateTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatLongDateTime(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatShortDateTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatShortDateTime(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatElapsedInterval', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatElapsedInterval(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatElapsedTime', \r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatElapsedTime(value);  \r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatMillisecondsToSeconds',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value) {\r\n                return pipDateFormat.formatMillisecondsToSeconds(value);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatDateRange',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value1, value2) {\r\n                return pipDateFormat.formatDateRange(value1, value2);\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.filter('formatDateTimeRange',\r\n        ['pipDateFormat', function (pipDateFormat) {\r\n            return function(value1, value2) {\r\n                return pipDateFormat.formatDateTimeRange(value1, value2);\r\n            };\r\n        }]\r\n    );\r\n\r\n\r\n})();\r\n","/**\r\n * @file Filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslateFilters', ['pipTranslate']);\r\n\r\n    thisModule.filter('translate', ['pipTranslate', function (pipTranslate) {\r\n        return function (key) {\r\n            return pipTranslate.translate(key) || key;\r\n        }\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Collection utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Collections', []);\r\n\r\n    thisModule.factory('pipCollections', function () {\r\n        var collections = {};\r\n\r\n        // Index of element in array by key\r\n        collections.indexBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return i;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Find element in array by key\r\n        collections.findBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return items[i];\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Remove element from array by value\r\n        collections.remove = function (items, item) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i] == item) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Removes element from array by key\r\n        collections.removeBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Replaced element by key\r\n        collections.replaceBy = function (items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Calculate difference between two collections\r\n        collections.difference = function (a1, a2, comparator) {\r\n            var result = [];\r\n    \r\n            _.each(a1, function (e1) {\r\n                var e2 = _.find(a2, function (e) {\r\n                    return comparator(e1, e);\r\n                });\r\n    \r\n                if (e2 == null) {\r\n                    result.push(e1);\r\n                }\r\n            })\r\n    \r\n            return result;\r\n        };\r\n\r\n        return collections;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Date utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Dates', []);\r\n\r\n    thisModule.factory('pipDates', function () {\r\n        var dates = {};\r\n\r\n        dates.addHours = function (date, hours) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            var time = date.getTime() + hours * 3600000;\r\n            return new Date(time);\r\n        };\r\n\r\n        dates.toStartDay = function (date) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            return new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n        };\r\n\r\n        dates.toEndDay = function (date, offset) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            offset = offset != null ? offset : 0;\r\n            var start = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            return new Date(start.getTime() + 24 * 3600000 + offset);\r\n        };\r\n\r\n        dates.toStartWeek = function (date) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            var dayOfWeek = date.getDay() ? date.getDay() : 7;\r\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            return new Date(date.getTime() - (dayOfWeek - 1) * 24 * 3600000);  // dayOfWeek = 0 для воскресенья\r\n        };\r\n\r\n        dates.toEndWeek = function (date, offset) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            offset = offset != null ? offset : 0;\r\n            var dayOfWeek = date.getDay() ? date.getDay() : 7;\r\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            return new Date(date.getTime() + (8 - dayOfWeek) * 24 * 3600000 + offset);\r\n        };\r\n\r\n        dates.toStartMonth = function (date) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            return new Date(date.getFullYear(), date.getMonth(), 1);\r\n        };\r\n\r\n        dates.toEndMonth = function (date, offset) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n\r\n            var\r\n                month = date.getMonth() + 1,\r\n                year = date.getFullYear();\r\n\r\n            if (month > 11) {\r\n                year++;\r\n                month = 0;\r\n            }\r\n\r\n            date = new Date(year, month, 1);\r\n\r\n            if (offset != null) {\r\n                date = new Date(date.getTime() + offset);\r\n            }\r\n\r\n            return date;\r\n        };\r\n\r\n        dates.toStartYear = function (date) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            return new Date(date.getFullYear(), 0, 1);\r\n        };\r\n\r\n        dates.toEndYear = function (date, offset) {\r\n            date = _.isDate(date) ? date : new Date(date);\r\n            date = new Date(date.getFullYear() + 1, 0, 1);\r\n\r\n            if (offset != null) {\r\n                date = new Date(date.getTime() + offset);\r\n            }\r\n\r\n            return date;\r\n        };\r\n\r\n        /** UTC functions  - **/\r\n        dates.toUTCDate = function (year, month, day) {\r\n            return new Date(Date.UTC(year, month, day));\r\n        };\r\n\r\n        dates.toUTCDate = function (date) {\r\n            return new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n        };\r\n\r\n        dates.fromUTCDate = function (date) {\r\n            if (date == null) date = new Date();\r\n            return new Date(\r\n                date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\r\n        };\r\n\r\n        dates.toUTCStartWeek = function (date) {\r\n            if(!_.isDate(date)) {\r\n                date = new Date(date);\r\n                date = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n            }\r\n            var dayOfWeek = date.getDay() ? date.getDay() : 7;\r\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            date = dayOfWeek != 1 ? new Date(date.getTime() - (dayOfWeek - 1) * 24 * 3600000) : date;\r\n            return  new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n        };\r\n\r\n        dates.toUTCEndWeek = function (date, offset) {\r\n            if(!_.isDate(date)) {\r\n                date = new Date(date);\r\n                date = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n            }\r\n            offset = offset != null ? offset : 0;\r\n            var dayOfWeek = date.getDay() ? date.getDay() : 7;\r\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            date = new Date(date.getTime() + (8 - dayOfWeek) * 24 * 3600000 + offset);\r\n            return  new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n        };\r\n\r\n        return dates;\r\n    });\r\n})();\r\n","/**\r\n * @file Form error utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n \r\n /* global _, angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.FormErrors', []);\r\n\r\n    thisModule.factory('pipFormErrors', ['$rootScope', function ($rootScope) {\r\n\t\treturn {\r\n\t\t\terrorsWithHint: errorsWithHint,\r\n            //submittedErrors: submittedErrors,\r\n            //submittedErrorsWithHint: submittedErrorsWithHint,\r\n            //dirtyErrors: dirtyErrors,\r\n            //dirtyErrorsWithHint: dirtyErrorsWithHint,\r\n            //touchedErrors: touchedErrors,            \r\n            touchedErrorsWithHint: touchedErrorsWithHint,\r\n            resetFormErrors: resetFormErrors,\r\n            setFormError: setFormError,\r\n            resetFieldsErrors: resetFieldsErrors\r\n\t\t};\r\n\t\t//-------------------\r\n\r\n        function errorsWithHint(field) {\r\n            if (field == null) return;\r\n\t\t\t\r\n            return _.isEmpty(field.$error) ? { hint: true } : field.$error;\r\n        };\r\n\t\t\r\n//         function submittedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function submittedErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function dirtyErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function dirtyErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function touchedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n//             \r\n//             if (field.$touched || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n\r\n        function touchedErrorsWithHint(form, field) {\r\n            if (form == null) return;\r\n            if (field == null) return;\r\n\r\n            if (form.$submitted && (field.$touched || form.$dirty) || !form.$submitted && (field.$touched || field.$dirty)) {\r\n                var result = _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n                return result;\r\n            }\r\n            return { hint: true };\r\n        };\r\n\r\n        function resetFormErrors(form, errors) {\r\n            form.$setPristine();\r\n            form.$setUntouched();\r\n\r\n            if (errors) {\r\n                form.$setDirty();\r\n                form.$setSubmitted();\r\n            }\r\n\r\n            form.$serverError = {};\r\n        };\r\n        \r\n        function resetFieldsErrors(form, field) {\r\n            if (!form) return;\r\n            if (field && form[field] && form[field].$error) {\r\n                 form[field].$error = {};\r\n            } else {\r\n                for (var prop in form) {\r\n                    if (form[prop] && form[prop].$error) {\r\n                        form[prop].$error = {};\r\n                    };\r\n                }\r\n                if (form && form.$error) form.$error = {};\r\n            }\r\n        };\r\n        \r\n        function setFormError(form, error, errorFieldMap) {\r\n            if (error == null) return;\r\n            // Prepare form server errors\r\n            form.$serverError = form.$serverError || {};\r\n            // Prepare error code\r\n            var code = error.code || (error.data || {}).code || null;\r\n            if (!code && error.status) code = error.status;\r\n\r\n            if (code) {\r\n                var \r\n                    errorName = 'ERROR_' + code,\r\n                    field = errorFieldMap ? errorFieldMap[code] : null;\r\n                // Set server error to fields\r\n                if (field && form[field] && form[field].$setValidity) {\r\n                    form[field].$setValidity(errorName, false);\r\n                    return;\r\n                }\r\n\r\n                // Set server error to form\r\n                if (field == 'form') {\r\n                    form.$serverError[errorName] = true;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if undefined error for this form or code === undefined/null, go to unhandled error page\r\n            if (error.data && error.data.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.data.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            // Set as undefined error\r\n            if (error.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            if (error.name) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.name;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            form.$serverError['ERROR_UNKNOWN'] = error;\r\n            goToUnhandledErrorPage(error);\r\n        };\r\n\r\n        function goToUnhandledErrorPage(error) {\r\n            $rootScope.$emit('pipUnhandledInternalError', {\r\n                error: error\r\n            });\r\n        };\r\n        \r\n\t}]);\r\n\r\n})();","/**\r\n * @file General purpose utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.General', ['pipState', 'pipAssert']);\r\n\r\n    thisModule.factory('pipUtils', ['$rootScope', '$window', '$state', 'pipAssert', function ($rootScope, $window, $state, pipAssert) {\r\n\r\n        function strRepeat(str, qty) {\r\n            if (qty < 1) return '';\r\n            var result = '';\r\n            while (qty > 0) {\r\n                if (qty & 1) result += str;\r\n                qty >>= 1, str += str;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        var toString = Object.prototype.toString;\r\n\r\n        var sprintf = (function sprintf() {\r\n            function get_type(variable) {\r\n                return toString.call(variable).slice(8, -1).toLowerCase();\r\n            }\r\n\r\n            var str_repeat = strRepeat;\r\n\r\n            var str_format = function() {\r\n                if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                    str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n                }\r\n                return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n            };\r\n\r\n            str_format.format = function(parse_tree, argv) {\r\n                var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n                for (i = 0; i < tree_length; i++) {\r\n                    node_type = get_type(parse_tree[i]);\r\n                    if (node_type === 'string') {\r\n                        output.push(parse_tree[i]);\r\n                    }\r\n                    else if (node_type === 'array') {\r\n                        match = parse_tree[i]; // convenience purposes only\r\n                        if (match[2]) { // keyword argument\r\n                            arg = argv[cursor];\r\n                            for (k = 0; k < match[2].length; k++) {\r\n                                if (!arg.hasOwnProperty(match[2][k])) {\r\n                                    throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                                }\r\n                                arg = arg[match[2][k]];\r\n                            }\r\n                        } else if (match[1]) { // positional argument (explicit)\r\n                            arg = argv[match[1]];\r\n                        }\r\n                        else { // positional argument (implicit)\r\n                            arg = argv[cursor++];\r\n                        }\r\n\r\n                        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                        }\r\n                        switch (match[8]) {\r\n                            case 'b': arg = arg.toString(2); break;\r\n                            case 'c': arg = String.fromCharCode(arg); break;\r\n                            case 'd': arg = parseInt(arg, 10); break;\r\n                            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                            case 'o': arg = arg.toString(8); break;\r\n                            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                            case 'u': arg = Math.abs(arg); break;\r\n                            case 'x': arg = arg.toString(16); break;\r\n                            case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                        }\r\n                        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                        pad_length = match[6] - String(arg).length;\r\n                        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                        output.push(match[5] ? arg + pad : pad + arg);\r\n                    }\r\n                }\r\n                return output.join('');\r\n            };\r\n\r\n            str_format.cache = {};\r\n\r\n            str_format.parse = function(fmt) {\r\n                var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n                while (_fmt) {\r\n                    if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                        parse_tree.push(match[0]);\r\n                    }\r\n                    else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                        parse_tree.push('%');\r\n                    }\r\n                    else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                        if (match[2]) {\r\n                            arg_names |= 1;\r\n                            var field_list = [], replacement_field = match[2], field_match = [];\r\n                            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                    if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else {\r\n                                        throw new Error('[_.sprintf] huh?');\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                throw new Error('[_.sprintf] huh?');\r\n                            }\r\n                            match[2] = field_list;\r\n                        }\r\n                        else {\r\n                            arg_names |= 2;\r\n                        }\r\n                        if (arg_names === 3) {\r\n                            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                        }\r\n                        parse_tree.push(match);\r\n                    }\r\n                    else {\r\n                        throw new Error('[_.sprintf] huh?');\r\n                    }\r\n                    _fmt = _fmt.substring(match[0].length);\r\n                }\r\n                return parse_tree;\r\n            };\r\n\r\n            return str_format;\r\n        })();\r\n\r\n        return {\r\n            copyProperty: copyProperty,\r\n            copy: copyProperty,\r\n            swapProperties: swapProperties,\r\n            swap: swapProperties,\r\n            convertToBoolean: convertToBoolean,\r\n            toBoolean: convertToBoolean,\r\n            toBool: convertToBoolean,\r\n            convertObjectIdsToString: convertObjectIdsToString,\r\n            OidToString: convertObjectIdsToString,\r\n            generateVerificationCode: generateVerificationCode,\r\n            vercode: generateVerificationCode,\r\n            goBack: goBack,\r\n            goBackAndSelect: goBackAndSelect,\r\n            scrollTo: scrollTo,\r\n            equalObjectIds: equalObjectIds,\r\n            eqOid: equalObjectIds,\r\n            notEqualObjectIds: notEqualObjectIds,\r\n            neqOid: notEqualObjectIds,\r\n            containsObjectId: containsObjectId,\r\n            hasOid: containsObjectId,\r\n            isObjectId: isObjectId,\r\n            // Strings functions. No analogues in lodash.strings\r\n            sampleLine: sampleLine,\r\n            hashCode: hashCode,\r\n            makeString: makeString,\r\n            getBrowser: getBrowser,\r\n            checkSupported: checkSupported,\r\n            sprintf: sprintf,\r\n            // Collection function. No analogues in lodash. It may be in lodash later. Look gitHub/lodash issue #1022\r\n            replaceBy: replaceBy\r\n        };\r\n        \r\n        //--------------------\r\n        function replaceBy(items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n\r\n        // Creates a sample line from a text\r\n        function sampleLine(value, maxLength) {\r\n            if (!value || value == '') return '';\r\n\r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n\r\n            return value.substring(0, length);\r\n        };\r\n\r\n        // Simple version of string hashcode\r\n        function hashCode(value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        // Ensure some object is a coerced to a string\r\n        function makeString(object) {\r\n            if (object == null) return '';\r\n            return '' + object;\r\n        };\r\n\r\n        function isObjectId(value) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            return checkForHexRegExp.test(value);\r\n        }\r\n\r\n        // Compares two ObjectIds (they are not equal by '==')\r\n        function equalObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return true;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return false;\r\n\r\n            return value1.toString() == value2.toString();\r\n        };\r\n\r\n        // Compares two ObjectIds (they are always not equal by '!=')\r\n        function notEqualObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return false;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return true;\r\n\r\n            return value1.toString() != value2.toString();\r\n        };\r\n\r\n        // Checks if array contains concrete objectId\r\n        function containsObjectId(values, value) {\r\n            return _.some(values, function (value1) {\r\n                return equalObjectIds(value1, value);\r\n            });\r\n        };\r\n\r\n        // Copy property from one object to another if it exists (not null)\r\n        function copyProperty(dest, destProperty, orig, origProperty) {\r\n            // Shift if only 3 arguments set\r\n            if (_.isObject(destProperty)\r\n                && typeof (origProperty) == 'undefined') {\r\n                origProperty = orig;\r\n                orig = destProperty;\r\n                destProperty = origProperty;\r\n            }\r\n    \r\n            if (orig[origProperty] || (typeof (orig[origProperty]) === 'number' && orig[origProperty] % 1 == 0)) {\r\n                dest[destProperty] = orig[origProperty];\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        };\r\n    \r\n        // Swaps values of two properties\r\n        function swapProperties(obj, prop1, prop2) {\r\n            var \r\n                temp1 = obj[prop1],\r\n                temp2 = obj[prop2];\r\n    \r\n            if (temp1) {\r\n                obj[prop2] = temp1;\r\n            }\r\n            else {\r\n                delete obj[prop2];\r\n            }\r\n    \r\n            if (temp2) {\r\n                obj[prop1] = temp2;\r\n            }\r\n            else {\r\n                delete obj[prop1];\r\n            }\r\n        };\r\n    \r\n        // Converts value into boolean\r\n        function convertToBoolean(value) {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        };\r\n    \r\n        // Converts array of object ids to strings (for comparison)\r\n        function convertObjectIdsToString(values) {\r\n            return _.map(values, function (value) {\r\n                return value ? value.toString() : 0;\r\n            });\r\n        };\r\n\r\n        // Generates random big number for verification codes\r\n        function generateVerificationCode() {\r\n            return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n        };\r\n\r\n        // Navigation\r\n        //-------------\r\n\r\n        function goBack() {\r\n            $window.history.back()\r\n        };\r\n\r\n        function goBackAndSelect(object, idParamName, objParamName) {\r\n            pipAssert.isDef(object, 'pipUtils.goBack: first argument should be defined');\r\n            pipAssert.isDef(idParamName, 'pipUtils.goBack: second argument should be defined');\r\n            pipAssert.isDef(objParamName, 'pipUtils.goBack: third argument should be defined');\r\n            pipAssert.isObject(object, 'pipUtils.goBack: first argument should be an object');\r\n            pipAssert.isString(idParamName, 'pipUtils.goBack: second argument should a string');\r\n            pipAssert.isString(objParamName, 'pipUtils.goBack: third argument should a string');\r\n                \r\n            if ($rootScope.$prevState && $rootScope.$prevState.name) {\r\n                var state = _.cloneDeep($rootScope.$prevState);\r\n\r\n                state.params[idParamName] = object.id;\r\n                state.params[objParamName] = object;\r\n\r\n                $state.go(state.name, state.params);\r\n            } else {\r\n                $window.history.back();\r\n            }\r\n        };\r\n\r\n        // Scrolling\r\n        //--------------\r\n        \r\n        function scrollTo(parentElement, childElement, animationDuration) {\r\n            if(!parentElement || !childElement) return;\r\n            if (animationDuration == undefined) animationDuration = 300;\r\n\r\n            setTimeout(function () {\r\n                if (!$(childElement).position()) return;\r\n                var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                if (modDiff < 20) return;\r\n                var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                if (animationDuration > 0)\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, animationDuration);\r\n            }, 100);\r\n        };\r\n\r\n        // todo add support for iPhone\r\n        function getBrowser() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            var bName = function () {\r\n                if (ua.search(/Edge/) > -1) return \"edge\";\r\n                if (ua.search(/MSIE/) > -1) return \"ie\";\r\n                if (ua.search(/Trident/) > -1) return \"ie11\";\r\n                if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n                if (ua.search(/Opera/) > -1) return \"opera\";\r\n                if (ua.search(/OPR/) > -1) return \"operaWebkit\";\r\n                if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n                if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n                if (ua.search(/Safari/) > -1) return \"safari\";\r\n                if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n            }();\r\n\r\n            var version;\r\n            switch (bName) {\r\n                case \"edge\":\r\n                    version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                    break;\r\n                case \"ie\":\r\n                    version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                    break;\r\n                case \"ie11\":\r\n                    bName = \"ie\";\r\n                    version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                    break;\r\n                case \"firefox\":\r\n                    version = ua.split(\"Firefox/\")[1];\r\n                    break;\r\n                case \"opera\":\r\n                    version = ua.split(\"Version/\")[1];\r\n                    break;\r\n                case \"operaWebkit\":\r\n                    bName = \"opera\";\r\n                    version = ua.split(\"OPR/\")[1];\r\n                    break;\r\n                case \"yabrowser\":\r\n                    version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"chrome\":\r\n                    version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"safari\":\r\n                    version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"maxthon\":\r\n                    version = ua.split(\"Maxthon/\")[1];\r\n                    break;\r\n            }\r\n\r\n            var platform = 'desktop';\r\n            if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) platform = 'mobile';\r\n\r\n            var os;\r\n            try {\r\n                var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [u])[0].replace('sunos', 'solaris'),\r\n                    osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n                    os = osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n            } catch (err) {\r\n                os = 'unknown'\r\n            }\r\n\r\n            var browsrObj;\r\n\r\n            try {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: bName,\r\n                    versionFull: version,\r\n                    versionShort: version.split(\".\")[0],\r\n                    os: os\r\n                };\r\n            } catch (err) {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: 'unknown',\r\n                    versionFull: 'unknown',\r\n                    versionShort: 'unknown',\r\n                    os: 'unknown'\r\n                };\r\n            }\r\n\r\n            return browsrObj;\r\n        }\r\n\r\n        // todo нужны каке нибудь настройки?\r\n        function checkSupported(supported) {\r\n            if (!supported) supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n            var systemInfo = getBrowser();\r\n\r\n            if (systemInfo && systemInfo.browser && supported[systemInfo.browser]){\r\n                if (systemInfo.versionShort >= supported[systemInfo.browser]) return true;\r\n            }\r\n            return true;\r\n\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file String utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Move functions to general utilities\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Strings', []);\r\n\r\n    thisModule.factory('pipStrings', function () {\r\n        var strings = {};\r\n\r\n        // Creates a sample line from a text\r\n        strings.sampleLine = function (value, maxLength) {\r\n            if (!value || value == '') return '';\r\n    \r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n    \r\n            return value.substring(0, length);\r\n        };\r\n    \r\n        // Simple version of string hashcode\r\n        strings.hashCode = function (value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        return strings;\r\n    });\r\n\r\n})();","/**\r\n * @file Search tag utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Tags', []);\r\n\r\n    thisModule.factory('pipTags', function () {\r\n        var tags = {};\r\n        \r\n        var HASHTAG_REGEX = /#\\w+/g;\r\n    \r\n        var normalizeTag = function (tag) {\r\n            return tag \r\n                ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n                : null;\r\n        };\r\n        tags.normalizeTag = normalizeTag;\r\n    \r\n        var compressTag = function (tag) {\r\n            return tag\r\n                ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n                : null;\r\n        };\r\n        tags.compressTag = compressTag;\r\n    \r\n        var equalTags = function (tag1, tag2) {\r\n            if (tag1 == null && tag2 == null)\r\n                return true;\r\n            if (tag1 == null || tag2 == null)\r\n                return false;\r\n            return compressTag(tag1) == compressTag(tag2);\r\n        };\r\n        tags.equalTags = equalTags;\r\n    \r\n        var normalizeTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return normalizeTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.normalizeTags = normalizeTags;\r\n    \r\n        var compressTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return compressTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.compressTags = compressTags;\r\n    \r\n        var extractTags = function (entity, searchFields) {\r\n            var tags = normalizeTags(entity.tags);\r\n    \r\n            _.each(searchFields, function (field) {\r\n                var text = entity[field] || '';\r\n    \r\n                if (text != '') {\r\n                    var hashTags = text.match(HASHTAG_REGEX);\r\n                    tags = tags.concat(normalizeTags(hashTags));\r\n                }\r\n            });\r\n    \r\n            return _.uniq(tags);\r\n        };\r\n        tags.extractTags = extractTags;\r\n\r\n        return tags;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Collection of utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUtils', \r\n\t\t['pipUtils.General', 'pipUtils.Strings', 'pipUtils.Dates', 'pipUtils.Tags', 'pipUtils.Collections', 'pipUtils.FormErrors']);\r\n})();\r\n"],"sourceRoot":"/source/"}